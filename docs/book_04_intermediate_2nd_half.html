<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 中級編後半 | データエンジニアリング人材養成演習補助教材</title>
  <meta name="description" content="本ページは、滋賀大学の集中講義「データエンジニアリング人材養成演習」の補助教材です。" />
  <meta name="generator" content="bookdown 0.21.4 and GitBook 2.6.7" />

  <meta property="og:title" content="5 中級編後半 | データエンジニアリング人材養成演習補助教材" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="本ページは、滋賀大学の集中講義「データエンジニアリング人材養成演習」の補助教材です。" />
  <meta name="github-repo" content="DEMLC/Educational-materials" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 中級編後半 | データエンジニアリング人材養成演習補助教材" />
  
  <meta name="twitter:description" content="本ページは、滋賀大学の集中講義「データエンジニアリング人材養成演習」の補助教材です。" />
  

<meta name="author" content="滋賀大学DEMLセンター" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="book_03_intermediate_1st_half.html"/>
<link rel="next" href="environment.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="https://demlc.github.io/Educational-materials/">DE人材養成演習補助教材</a></strong></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>はじめに</a></li>
<li class="chapter" data-level="1" data-path="book_00_introduction.html"><a href="book_00_introduction.html"><i class="fa fa-check"></i><b>1</b> 導入編</a>
<ul>
<li class="chapter" data-level="1.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#本資料について"><i class="fa fa-check"></i><b>1.1</b> 本資料について</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#対象読者"><i class="fa fa-check"></i><b>1.1.1</b> 対象読者</a></li>
<li class="chapter" data-level="1.1.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#目的"><i class="fa fa-check"></i><b>1.1.2</b> 目的</a></li>
<li class="chapter" data-level="1.1.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#構成"><i class="fa fa-check"></i><b>1.1.3</b> 構成</a></li>
<li class="chapter" data-level="1.1.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#到達目標"><i class="fa fa-check"></i><b>1.1.4</b> 到達目標</a></li>
<li class="chapter" data-level="1.1.5" data-path="book_00_introduction.html"><a href="book_00_introduction.html#導入編の内容"><i class="fa fa-check"></i><b>1.1.5</b> 導入編の内容</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#tidyverse"><i class="fa fa-check"></i><b>1.2</b> tidyverse</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#what_tidyverse"><i class="fa fa-check"></i><b>1.2.1</b> tidyverseとは</a></li>
<li class="chapter" data-level="1.2.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#why_tidyverse"><i class="fa fa-check"></i><b>1.2.2</b> なぜtidyverseを使うのか</a></li>
<li class="chapter" data-level="1.2.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#install_tidyverse"><i class="fa fa-check"></i><b>1.2.3</b> tidyverseのインストールと読込</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#tibble"><i class="fa fa-check"></i><b>1.3</b> tibble</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#about_tibble"><i class="fa fa-check"></i><b>1.3.1</b> tibbleとは</a></li>
<li class="chapter" data-level="1.3.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#コンソール表示の比較"><i class="fa fa-check"></i><b>1.3.2</b> コンソール表示の比較</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#パイプ演算子"><i class="fa fa-check"></i><b>1.4</b> パイプ演算子 %&gt;%</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#what_pipe"><i class="fa fa-check"></i><b>1.4.1</b> パイプ演算子とは</a></li>
<li class="chapter" data-level="1.4.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#pipemerit"><i class="fa fa-check"></i><b>1.4.2</b> パイプ演算子のメリット</a></li>
<li class="chapter" data-level="1.4.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#pipe_sanko"><i class="fa fa-check"></i><b>1.4.3</b> 参考</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="book_00_introduction.html"><a href="book_00_introduction.html#プロジェクト"><i class="fa fa-check"></i><b>1.5</b> プロジェクト</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#プロジェクトとは"><i class="fa fa-check"></i><b>1.5.1</b> プロジェクトとは</a></li>
<li class="chapter" data-level="1.5.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#Rproject"><i class="fa fa-check"></i><b>1.5.2</b> R project</a></li>
<li class="chapter" data-level="1.5.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#Rproject_create"><i class="fa fa-check"></i><b>1.5.3</b> R projectの作成</a></li>
<li class="chapter" data-level="1.5.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#Rproject_pros"><i class="fa fa-check"></i><b>1.5.4</b> R projectの利点</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="book_00_introduction.html"><a href="book_00_introduction.html#ディレクトリフォルダ構成"><i class="fa fa-check"></i><b>1.6</b> ディレクトリ(フォルダ)構成</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#ディレクトリ構成とは"><i class="fa fa-check"></i><b>1.6.1</b> ディレクトリ構成とは</a></li>
<li class="chapter" data-level="1.6.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#demo_dirのディレクトリ構成詳細"><i class="fa fa-check"></i><b>1.6.2</b> <strong>demo_dir</strong>のディレクトリ構成詳細</a></li>
<li class="chapter" data-level="1.6.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#ディレクトリ構成を定義するメリット"><i class="fa fa-check"></i><b>1.6.3</b> ディレクトリ構成を定義するメリット</a></li>
<li class="chapter" data-level="1.6.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#ディレクトリ構成の事例"><i class="fa fa-check"></i><b>1.6.4</b> ディレクトリ構成の事例</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="book_00_introduction.html"><a href="book_00_introduction.html#here"><i class="fa fa-check"></i><b>1.7</b> here</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#whats_here"><i class="fa fa-check"></i><b>1.7.1</b> hereパッケージとは</a></li>
<li class="chapter" data-level="1.7.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#path_problem"><i class="fa fa-check"></i><b>1.7.2</b> pathの悩みの具体例</a></li>
<li class="chapter" data-level="1.7.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#solve_path_problem"><i class="fa fa-check"></i><b>1.7.3</b> hereによる悩みの解消</a></li>
<li class="chapter" data-level="1.7.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#悩み事例の視覚的説明"><i class="fa fa-check"></i><b>1.7.4</b> 悩み事例の視覚的説明</a></li>
<li class="chapter" data-level="1.7.5" data-path="book_00_introduction.html"><a href="book_00_introduction.html#OS_ploblem"><i class="fa fa-check"></i><b>1.7.5</b> 異なるOS/個人間によるpath相違の解消</a></li>
<li class="chapter" data-level="1.7.6" data-path="book_00_introduction.html"><a href="book_00_introduction.html#solve_os_ploblem"><i class="fa fa-check"></i><b>1.7.6</b> hereを使ったpath</a></li>
<li class="chapter" data-level="1.7.7" data-path="book_00_introduction.html"><a href="book_00_introduction.html#how_here"><i class="fa fa-check"></i><b>1.7.7</b> hereの使い方</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="book_00_introduction.html"><a href="book_00_introduction.html#helpファイルの開き方"><i class="fa fa-check"></i><b>1.8</b> helpファイルの開き方</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#コードが動かないときの対処法"><i class="fa fa-check"></i><b>1.8.1</b> コードが動かないときの対処法</a></li>
<li class="chapter" data-level="1.8.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#help_open"><i class="fa fa-check"></i><b>1.8.2</b> “？関数名”でhelp</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="book_00_introduction.html"><a href="book_00_introduction.html#クォーテーションの使いわけ"><i class="fa fa-check"></i><b>1.9</b> クォーテーションの使いわけ</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="book_00_introduction.html"><a href="book_00_introduction.html#クォートを使うとき"><i class="fa fa-check"></i><b>1.9.1</b> クォートを使うとき</a></li>
<li class="chapter" data-level="1.9.2" data-path="book_00_introduction.html"><a href="book_00_introduction.html#ダブルクォートシングルクォート"><i class="fa fa-check"></i><b>1.9.2</b> ダブルクォート・シングルクォート</a></li>
<li class="chapter" data-level="1.9.3" data-path="book_00_introduction.html"><a href="book_00_introduction.html#バッククォート"><i class="fa fa-check"></i><b>1.9.3</b> バッククォート</a></li>
<li class="chapter" data-level="1.9.4" data-path="book_00_introduction.html"><a href="book_00_introduction.html#括弧つきカラムの参照"><i class="fa fa-check"></i><b>1.9.4</b> 括弧つきカラムの参照</a></li>
<li class="chapter" data-level="1.9.5" data-path="book_00_introduction.html"><a href="book_00_introduction.html#非標準文字列は必ずバッククォートを使用"><i class="fa fa-check"></i><b>1.9.5</b> 非標準文字列は必ずバッククォートを使用</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="book_00_introduction.html"><a href="book_00_introduction.html#おわり"><i class="fa fa-check"></i>おわり</a>
<ul>
<li class="chapter" data-level="" data-path="book_00_introduction.html"><a href="book_00_introduction.html#著者"><i class="fa fa-check"></i>著者</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html"><i class="fa fa-check"></i><b>2</b> 初級編前半</a>
<ul>
<li class="chapter" data-level="" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#はじめに-1"><i class="fa fa-check"></i>はじめに</a>
<ul>
<li class="chapter" data-level="" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#研磨ストーリー"><i class="fa fa-check"></i>研磨ストーリー</a></li>
<li class="chapter" data-level="" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#作業イメージ"><i class="fa fa-check"></i>作業イメージ</a></li>
<li class="chapter" data-level="" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ディレクトリ構成"><i class="fa fa-check"></i>ディレクトリ構成</a></li>
<li class="chapter" data-level="" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ライブラリを読み込む"><i class="fa fa-check"></i>ライブラリを読み込む</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ステップ１csvファイルの読み込み"><i class="fa fa-check"></i><b>2.1</b> ステップ１：CSVファイルの読み込み</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#sagyou_step1"><i class="fa fa-check"></i><b>2.1.1</b> 作業内容</a></li>
<li class="chapter" data-level="2.1.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#read_csv"><i class="fa fa-check"></i><b>2.1.2</b> <strong>read_csv</strong>でcsvデータを読み込む</a></li>
<li class="chapter" data-level="2.1.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#read_csv_args"><i class="fa fa-check"></i><b>2.1.3</b> read_csvの主要な引数</a></li>
<li class="chapter" data-level="2.1.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#col_typesの書き方"><i class="fa fa-check"></i><b>2.1.4</b> col_typesの書き方</a></li>
<li class="chapter" data-level="2.1.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#read_cosmos2"><i class="fa fa-check"></i><b>2.1.5</b> COSMOS2（c2）データの読み込み</a></li>
<li class="chapter" data-level="2.1.6" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#glimpse"><i class="fa fa-check"></i><b>2.1.6</b> <strong>glimpse</strong>でデータを見る</a></li>
<li class="chapter" data-level="2.1.7" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#読み込み時に注意すべき例０落ち"><i class="fa fa-check"></i><b>2.1.7</b> 読み込み時に注意すべき例：０落ち</a></li>
<li class="chapter" data-level="2.1.8" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#生データの確認方法"><i class="fa fa-check"></i><b>2.1.8</b> 生データの確認方法</a></li>
<li class="chapter" data-level="2.1.9" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step1_sanko1"><i class="fa fa-check"></i><b>2.1.9</b> 参考１：カラム型指定tips</a></li>
<li class="chapter" data-level="2.1.10" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step1_sanko2"><i class="fa fa-check"></i><b>2.1.10</b> 参考２：()付きカラムの取り扱い</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ステップ２データの縦結合"><i class="fa fa-check"></i><b>2.2</b> ステップ２：データの縦結合</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#sagyou_step2"><i class="fa fa-check"></i><b>2.2.1</b> 作業内容</a></li>
<li class="chapter" data-level="2.2.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#bind_rowsでデータの縦行結合"><i class="fa fa-check"></i><b>2.2.2</b> <strong>bind_rows</strong>でデータの縦(行)結合</a></li>
<li class="chapter" data-level="2.2.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#参考１３つ以上のデータの縦結合"><i class="fa fa-check"></i><b>2.2.3</b> 参考１：３つ以上のデータの縦結合</a></li>
<li class="chapter" data-level="2.2.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#参考２カラム名不一致データの縦結合"><i class="fa fa-check"></i><b>2.2.4</b> 参考２：カラム名不一致データの縦結合</a></li>
<li class="chapter" data-level="2.2.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#参考３データの横列結合"><i class="fa fa-check"></i><b>2.2.5</b> 参考３：データの横（列）結合</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ステップ３レコードの重複消去"><i class="fa fa-check"></i><b>2.3</b> ステップ３：レコードの重複消去</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#sagyou_step3"><i class="fa fa-check"></i><b>2.3.1</b> 作業内容</a></li>
<li class="chapter" data-level="2.3.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#n_distinct"><i class="fa fa-check"></i><b>2.3.2</b> <strong>n_distinct</strong>で重複があるか調べる</a></li>
<li class="chapter" data-level="2.3.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#distinctで重複レコードの消去"><i class="fa fa-check"></i><b>2.3.3</b> <strong>distinct</strong>で重複レコードの消去</a></li>
<li class="chapter" data-level="2.3.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#企業コードの重複確認と重複消去"><i class="fa fa-check"></i><b>2.3.4</b> 企業コードの重複確認と重複消去</a></li>
<li class="chapter" data-level="2.3.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step3_sanko1"><i class="fa fa-check"></i><b>2.3.5</b> 参考１：複数カラムデータの重複消去</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ステップ４カラムの選択"><i class="fa fa-check"></i><b>2.4</b> ステップ４：カラムの選択</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#sagyou_step4"><i class="fa fa-check"></i><b>2.4.1</b> 作業内容</a></li>
<li class="chapter" data-level="2.4.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#必要なカラム"><i class="fa fa-check"></i><b>2.4.2</b> 必要なカラム</a></li>
<li class="chapter" data-level="2.4.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#selectでカラムの選択"><i class="fa fa-check"></i><b>2.4.3</b> <strong>select</strong>でカラムの選択</a></li>
<li class="chapter" data-level="2.4.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step4_sanko1"><i class="fa fa-check"></i><b>2.4.4</b> 参考１：不要な読み込みはしない</a></li>
<li class="chapter" data-level="2.4.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step4_sanko2"><i class="fa fa-check"></i><b>2.4.5</b> 参考２：ベクトルで変数の選択</a></li>
<li class="chapter" data-level="2.4.6" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step4_sanko3"><i class="fa fa-check"></i><b>2.4.6</b> 参考３：変数消去</a></li>
<li class="chapter" data-level="2.4.7" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step4_sanko4"><i class="fa fa-check"></i><b>2.4.7</b> 参考４：クォート</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#ステップ５データの横結合"><i class="fa fa-check"></i><b>2.5</b> ステップ５：データの横結合</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#sagyou_step5"><i class="fa fa-check"></i><b>2.5.1</b> 作業内容</a></li>
<li class="chapter" data-level="2.5.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#いろいろな結合方法"><i class="fa fa-check"></i><b>2.5.2</b> いろいろな結合方法</a></li>
<li class="chapter" data-level="2.5.3" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#left_join_image"><i class="fa fa-check"></i><b>2.5.3</b> left_joinのイメージ</a></li>
<li class="chapter" data-level="2.5.4" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#結合する方法を決める"><i class="fa fa-check"></i><b>2.5.4</b> 結合する方法を決める</a></li>
<li class="chapter" data-level="2.5.5" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#left_joinでデータの結合"><i class="fa fa-check"></i><b>2.5.5</b> <strong>left_join</strong>でデータの結合</a></li>
<li class="chapter" data-level="2.5.6" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#step5_sanko"><i class="fa fa-check"></i><b>2.5.6</b> 参考：right_join</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#箸休めスライド"><i class="fa fa-check"></i><b>2.6</b> 箸休めスライド</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#relocateでカラムを少しだけ並び替え"><i class="fa fa-check"></i><b>2.6.1</b> relocateでカラムを少しだけ並び替え</a></li>
<li class="chapter" data-level="2.6.2" data-path="book_01_beginner_1st_half.html"><a href="book_01_beginner_1st_half.html#tabキーで補完入力"><i class="fa fa-check"></i><b>2.6.2</b> Tabキーで補完入力</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html"><i class="fa fa-check"></i><b>3</b> 初級編後半</a>
<ul>
<li class="chapter" data-level="" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#作業の確認"><i class="fa fa-check"></i>作業の確認</a>
<ul>
<li class="chapter" data-level="" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#研磨ストーリー-1"><i class="fa fa-check"></i>研磨ストーリー</a></li>
<li class="chapter" data-level="" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#作業イメージ-1"><i class="fa fa-check"></i>作業イメージ</a></li>
<li class="chapter" data-level="" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#前半の成果物"><i class="fa fa-check"></i>前半の成果物</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ６カラム操作の基本"><i class="fa fa-check"></i><b>3.1</b> ステップ６：カラム操作の基本</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step6"><i class="fa fa-check"></i><b>3.1.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.1.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#mutateの基本"><i class="fa fa-check"></i><b>3.1.2</b> <strong>mutate</strong>の基本</a></li>
<li class="chapter" data-level="3.1.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#mutate_example"><i class="fa fa-check"></i><b>3.1.3</b> mutateの使用例</a></li>
<li class="chapter" data-level="3.1.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#hosoku_mutate"><i class="fa fa-check"></i><b>3.1.4</b> 補足</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ７カラムの新設"><i class="fa fa-check"></i><b>3.2</b> ステップ７：カラムの新設</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step7"><i class="fa fa-check"></i><b>3.2.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.2.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#substrで文字列の部分抽出"><i class="fa fa-check"></i><b>3.2.2</b> <strong>substr</strong>で文字列の部分抽出</a></li>
<li class="chapter" data-level="3.2.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#都道府県コードカラムの新設"><i class="fa fa-check"></i><b>3.2.3</b> 都道府県コードカラムの新設</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ８マスタの結合"><i class="fa fa-check"></i><b>3.3</b> ステップ８：マスタの結合</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step8"><i class="fa fa-check"></i><b>3.3.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.3.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#read_ken_mst"><i class="fa fa-check"></i><b>3.3.2</b> 都道府県マスタの読み込み</a></li>
<li class="chapter" data-level="3.3.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#join_failed"><i class="fa fa-check"></i><b>3.3.3</b> data_2にken_mstを結合（失敗）</a></li>
<li class="chapter" data-level="3.3.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#renameでカラム名の変更"><i class="fa fa-check"></i><b>3.3.4</b> <strong>rename</strong>でカラム名の変更</a></li>
<li class="chapter" data-level="3.3.5" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#join_success"><i class="fa fa-check"></i><b>3.3.5</b> data_2にken_mstをジョイン（成功）</a></li>
<li class="chapter" data-level="3.3.6" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#不一致なカラム名をキーにする方法"><i class="fa fa-check"></i><b>3.3.6</b> 不一致なカラム名をキーにする方法</a></li>
<li class="chapter" data-level="3.3.7" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#hosoku_join_mst"><i class="fa fa-check"></i><b>3.3.7</b> 補足</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ９文字列の結合"><i class="fa fa-check"></i><b>3.4</b> ステップ９：文字列の結合</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step9"><i class="fa fa-check"></i><b>3.4.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.4.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#pasteで文字列の結合"><i class="fa fa-check"></i><b>3.4.2</b> <strong>paste</strong>で文字列の結合</a></li>
<li class="chapter" data-level="3.4.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#都道府県カラムの作成"><i class="fa fa-check"></i><b>3.4.3</b> 都道府県カラムの作成</a></li>
<li class="chapter" data-level="3.4.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step9_sanko"><i class="fa fa-check"></i><b>3.4.4</b> 参考：paste0</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１０指標の作成"><i class="fa fa-check"></i><b>3.5</b> ステップ１０：指標の作成</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step10"><i class="fa fa-check"></i><b>3.5.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.5.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#売上高利益率カラムの作成"><i class="fa fa-check"></i><b>3.5.2</b> 売上高利益率カラムの作成</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１１条件分岐処理"><i class="fa fa-check"></i><b>3.6</b> ステップ１１：条件分岐処理</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step11"><i class="fa fa-check"></i><b>3.6.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.6.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#if_else_ifelse_case_when"><i class="fa fa-check"></i><b>3.6.2</b> if_else, ifelse, case_when</a></li>
<li class="chapter" data-level="3.6.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#example_if_else_ifelse"><i class="fa fa-check"></i><b>3.6.3</b> if_else, ifelseの使用例</a></li>
<li class="chapter" data-level="3.6.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#if_else_isbetter"><i class="fa fa-check"></i><b>3.6.4</b> <strong>if_else</strong>はifelseより厳格</a></li>
<li class="chapter" data-level="3.6.5" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#case_whenの使用例"><i class="fa fa-check"></i><b>3.6.5</b> case_whenの使用例</a></li>
<li class="chapter" data-level="3.6.6" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#if_else_ver"><i class="fa fa-check"></i><b>3.6.6</b> 従業員数レンジカラム作成(if_else)</a></li>
<li class="chapter" data-level="3.6.7" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#case_when_ver"><i class="fa fa-check"></i><b>3.6.7</b> 従業員数レンジカラム作成(case_when)</a></li>
<li class="chapter" data-level="3.6.8" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step11_sanko"><i class="fa fa-check"></i><b>3.6.8</b> 参考：条件式</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１２ソート"><i class="fa fa-check"></i><b>3.7</b> ステップ１２：ソート</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step12"><i class="fa fa-check"></i><b>3.7.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.7.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#arrangeでソート"><i class="fa fa-check"></i><b>3.7.2</b> <strong>arrange</strong>でソート</a></li>
<li class="chapter" data-level="3.7.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#複数カラムでソート"><i class="fa fa-check"></i><b>3.7.3</b> 複数カラムでソート</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１３グループ集計"><i class="fa fa-check"></i><b>3.8</b> ステップ１３：グループ集計</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step13"><i class="fa fa-check"></i><b>3.8.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.8.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#how_group_summarise"><i class="fa fa-check"></i><b>3.8.2</b> <strong>group_by</strong>と<strong>summarise</strong>での集計方法</a></li>
<li class="chapter" data-level="3.8.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#複数カラムでグループ集計"><i class="fa fa-check"></i><b>3.8.3</b> 複数カラムでグループ集計</a></li>
<li class="chapter" data-level="3.8.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step13_sanko1"><i class="fa fa-check"></i><b>3.8.4</b> 参考１：mutateとの違い</a></li>
<li class="chapter" data-level="3.8.5" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step13_sanko2"><i class="fa fa-check"></i><b>3.8.5</b> 参考２：グループごとのレコード数を集計</a></li>
<li class="chapter" data-level="3.8.6" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step13_sanko3"><i class="fa fa-check"></i><b>3.8.6</b> 参考３：ピボットテーブル</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１４条件抽出"><i class="fa fa-check"></i><b>3.9</b> ステップ１４：条件抽出</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step14"><i class="fa fa-check"></i><b>3.9.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.9.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#filterで条件抽出"><i class="fa fa-check"></i><b>3.9.2</b> <strong>filter</strong>で条件抽出</a></li>
<li class="chapter" data-level="3.9.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#複数条件で抽出"><i class="fa fa-check"></i><b>3.9.3</b> 複数条件で抽出</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#ステップ１５ファイル出力"><i class="fa fa-check"></i><b>3.10</b> ステップ１５：ファイル出力</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#sagyou_step15"><i class="fa fa-check"></i><b>3.10.1</b> 作業内容</a></li>
<li class="chapter" data-level="3.10.2" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#不要な変数の消去"><i class="fa fa-check"></i><b>3.10.2</b> 不要な変数の消去</a></li>
<li class="chapter" data-level="3.10.3" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#カラムの並び替え"><i class="fa fa-check"></i><b>3.10.3</b> カラムの並び替え</a></li>
<li class="chapter" data-level="3.10.4" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#output_file"><i class="fa fa-check"></i><b>3.10.4</b> <strong>write_csv</strong>でcsvファイルの出力</a></li>
<li class="chapter" data-level="3.10.5" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#step15_sanko"><i class="fa fa-check"></i><b>3.10.5</b> 参考：ファイル出力のencoding</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="book_02_beginner_2nd_half.html"><a href="book_02_beginner_2nd_half.html#おわり-1"><i class="fa fa-check"></i>おわり</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html"><i class="fa fa-check"></i><b>4</b> 中級編前半</a>
<ul>
<li class="chapter" data-level="" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#はじめに-2"><i class="fa fa-check"></i>はじめに</a>
<ul>
<li class="chapter" data-level="" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#中級の作業イメージ"><i class="fa fa-check"></i>中級の作業イメージ</a></li>
<li class="chapter" data-level="" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#目次中級前半"><i class="fa fa-check"></i>目次（中級前半）</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#fukusuu_image"><i class="fa fa-check"></i><b>4.1</b> 複数ファイルの一括読み込み<br>(イメージ)</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#読み込むデータの確認"><i class="fa fa-check"></i><b>4.1.1</b> 読み込むデータの確認</a></li>
<li class="chapter" data-level="4.1.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#単純な方法"><i class="fa fa-check"></i><b>4.1.2</b> 単純な方法</a></li>
<li class="chapter" data-level="4.1.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for文を使用する方法"><i class="fa fa-check"></i><b>4.1.3</b> for文を使用する方法</a></li>
<li class="chapter" data-level="4.1.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_image"><i class="fa fa-check"></i><b>4.1.4</b> for文5ステップのイメージ</a></li>
<li class="chapter" data-level="4.1.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for文による繰り返し処理のススメ"><i class="fa fa-check"></i><b>4.1.5</b> for文による繰り返し処理のススメ</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#list"><i class="fa fa-check"></i><b>4.2</b> list</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#about_list"><i class="fa fa-check"></i><b>4.2.1</b> listとは</a></li>
<li class="chapter" data-level="4.2.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#image_list"><i class="fa fa-check"></i><b>4.2.2</b> listのイメージ</a></li>
<li class="chapter" data-level="4.2.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#make_list"><i class="fa fa-check"></i><b>4.2.3</b> listの作成</a></li>
<li class="chapter" data-level="4.2.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#append_list"><i class="fa fa-check"></i><b>4.2.4</b> listに要素を追加する</a></li>
<li class="chapter" data-level="4.2.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#access_list"><i class="fa fa-check"></i><b>4.2.5</b> listの要素にアクセス</a></li>
<li class="chapter" data-level="4.2.6" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#list_access_image"><i class="fa fa-check"></i><b>4.2.6</b> listの要素アクセスイメージ</a></li>
<li class="chapter" data-level="4.2.7" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#names_list"><i class="fa fa-check"></i><b>4.2.7</b> listの要素に名前をつける</a></li>
<li class="chapter" data-level="4.2.8" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#list_access_name"><i class="fa fa-check"></i><b>4.2.8</b> listの要素に名前でアクセス</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_bun"><i class="fa fa-check"></i><b>4.3</b> for文(繰り返し処理)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for文イントロダクション"><i class="fa fa-check"></i><b>4.3.1</b> for文イントロダクション</a></li>
<li class="chapter" data-level="4.3.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for文の使い方"><i class="fa fa-check"></i><b>4.3.2</b> for文の使い方</a></li>
<li class="chapter" data-level="4.3.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#適当な変数名を考える"><i class="fa fa-check"></i><b>4.3.3</b> 適当な変数名を考える</a></li>
<li class="chapter" data-level="4.3.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#ex_listfor"><i class="fa fa-check"></i><b>4.3.4</b> listとfor文を用いた例</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#fukusu_jisso"><i class="fa fa-check"></i><b>4.4</b> 複数ファイルの一括読み込み<br>(実装)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_image_2"><i class="fa fa-check"></i><b>4.4.1</b> for文の5ステップのイメージ(再掲)</a></li>
<li class="chapter" data-level="4.4.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_step1"><i class="fa fa-check"></i><b>4.4.2</b> for文：ステップ１</a></li>
<li class="chapter" data-level="4.4.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_step2"><i class="fa fa-check"></i><b>4.4.3</b> for文：ステップ２</a></li>
<li class="chapter" data-level="4.4.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_step345"><i class="fa fa-check"></i><b>4.4.4</b> for文：ステップ３,４,５</a></li>
<li class="chapter" data-level="4.4.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#for_matome"><i class="fa fa-check"></i><b>4.4.5</b> 複数ファイル読み込みまとめ</a></li>
<li class="chapter" data-level="4.4.6" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#複数ファイルの一括読み込み結果"><i class="fa fa-check"></i><b>4.4.6</b> 複数ファイルの一括読み込み結果</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#複数データの結合方法"><i class="fa fa-check"></i><b>4.5</b> 複数データの結合方法</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#タテ結合とヨコ結合"><i class="fa fa-check"></i><b>4.5.1</b> タテ結合とヨコ結合</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#複数データのタテ結合"><i class="fa fa-check"></i><b>4.6</b> 複数データのタテ結合</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#タテ結合結果"><i class="fa fa-check"></i><b>4.6.1</b> タテ結合結果</a></li>
<li class="chapter" data-level="4.6.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#タテ結合の手順"><i class="fa fa-check"></i><b>4.6.2</b> タテ結合の手順</a></li>
<li class="chapter" data-level="4.6.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#make_yearcol"><i class="fa fa-check"></i><b>4.6.3</b> 1. yearカラムの作成</a></li>
<li class="chapter" data-level="4.6.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#bind_tateketu"><i class="fa fa-check"></i><b>4.6.4</b> 2. bind_rowsでタテ結合</a></li>
<li class="chapter" data-level="4.6.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#tateketugou_hosoku"><i class="fa fa-check"></i><b>4.6.5</b> 補足</a></li>
<li class="chapter" data-level="4.6.6" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#tateketugou_sanko"><i class="fa fa-check"></i><b>4.6.6</b> 参考</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#複数データのヨコ結合"><i class="fa fa-check"></i><b>4.7</b> 複数データのヨコ結合</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#ヨコ結合結果"><i class="fa fa-check"></i><b>4.7.1</b> ヨコ結合結果</a></li>
<li class="chapter" data-level="4.7.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#ヨコ結合の手順"><i class="fa fa-check"></i><b>4.7.2</b> ヨコ結合の手順</a></li>
<li class="chapter" data-level="4.7.3" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#rename_with"><i class="fa fa-check"></i><b>4.7.3</b> 1. rename_withでカラム名の変更</a></li>
<li class="chapter" data-level="4.7.4" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#leftjoin_yokoketugo"><i class="fa fa-check"></i><b>4.7.4</b> 2. left_joinでヨコ結合</a></li>
<li class="chapter" data-level="4.7.5" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#yokoketugou_hosoku"><i class="fa fa-check"></i><b>4.7.5</b> 補足</a></li>
<li class="chapter" data-level="4.7.6" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#yokoketugou_sanko"><i class="fa fa-check"></i><b>4.7.6</b> 参考</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#rest_intermediate"><i class="fa fa-check"></i><b>4.8</b> 箸休めスライド</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#map関数"><i class="fa fa-check"></i><b>4.8.1</b> map関数</a></li>
<li class="chapter" data-level="4.8.2" data-path="book_03_intermediate_1st_half.html"><a href="book_03_intermediate_1st_half.html#select_helper"><i class="fa fa-check"></i><b>4.8.2</b> selectのhelper関数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html"><i class="fa fa-check"></i><b>5</b> 中級編後半</a>
<ul>
<li class="chapter" data-level="" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#作業の確認-1"><i class="fa fa-check"></i>作業の確認</a>
<ul>
<li class="chapter" data-level="" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#中級の作業イメージ-1"><i class="fa fa-check"></i>中級の作業イメージ</a></li>
<li class="chapter" data-level="" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#目次中級後半"><i class="fa fa-check"></i>目次（中級後半）</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#前半の作業のおさらい"><i class="fa fa-check"></i><b>5.1</b> 前半の作業のおさらい</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#複数データの読み込み"><i class="fa fa-check"></i><b>5.1.1</b> 複数データの読み込み</a></li>
<li class="chapter" data-level="5.1.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#タテ結合とヨコ結合-1"><i class="fa fa-check"></i><b>5.1.2</b> タテ結合とヨコ結合</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#widedata_longdata"><i class="fa fa-check"></i><b>5.2</b> タテ持ちデータ・ヨコ持ちデータ</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#what_widelong"><i class="fa fa-check"></i><b>5.2.1</b> タテ持ち・ヨコ持ちとは</a></li>
<li class="chapter" data-level="5.2.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#tokutyo_widelong"><i class="fa fa-check"></i><b>5.2.2</b> タテ持ち・ヨコ持ちの特徴</a></li>
<li class="chapter" data-level="5.2.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#タテヨコ変換"><i class="fa fa-check"></i><b>5.2.3</b> タテ⇔ヨコ変換</a></li>
<li class="chapter" data-level="5.2.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#タテヨコ変換イメージ画像"><i class="fa fa-check"></i><b>5.2.4</b> タテヨコ変換イメージ画像</a></li>
<li class="chapter" data-level="5.2.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#image_wide_long_2"><i class="fa fa-check"></i><b>5.2.5</b> タテヨコ変換イメージgif</a></li>
<li class="chapter" data-level="5.2.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#image_jisso"><i class="fa fa-check"></i><b>5.2.6</b> タテヨコ変換実装</a></li>
<li class="chapter" data-level="5.2.7" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#wide_to_long"><i class="fa fa-check"></i><b>5.2.7</b> <strong>pivot_longer</strong>でヨコ → タテ変換</a></li>
<li class="chapter" data-level="5.2.8" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#long_to_wide"><i class="fa fa-check"></i><b>5.2.8</b> <strong>pivot_wider</strong>でタテ → ヨコ変換</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#研磨データの比較検証"><i class="fa fa-check"></i><b>5.3</b> 研磨データの比較検証</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#比較検証をする理由"><i class="fa fa-check"></i><b>5.3.1</b> 比較検証をする理由</a></li>
<li class="chapter" data-level="5.3.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#比較検証をする方法"><i class="fa fa-check"></i><b>5.3.2</b> 比較検証をする方法</a></li>
<li class="chapter" data-level="5.3.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#検証データの作成long_data"><i class="fa fa-check"></i><b>5.3.3</b> 検証データの作成：long_data</a></li>
<li class="chapter" data-level="5.3.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#wide_data2"><i class="fa fa-check"></i><b>5.3.4</b> 検証データの作成：wide_data</a></li>
<li class="chapter" data-level="5.3.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#diffdfで一致確認"><i class="fa fa-check"></i><b>5.3.5</b> diffdfで一致確認</a></li>
<li class="chapter" data-level="5.3.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#不一致の原因"><i class="fa fa-check"></i><b>5.3.6</b> 不一致の原因</a></li>
<li class="chapter" data-level="5.3.7" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#不一致の理由"><i class="fa fa-check"></i><b>5.3.7</b> 不一致の理由</a></li>
<li class="chapter" data-level="5.3.8" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#条件を揃える準備"><i class="fa fa-check"></i><b>5.3.8</b> 条件を揃える準備</a></li>
<li class="chapter" data-level="5.3.9" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#再度検証"><i class="fa fa-check"></i><b>5.3.9</b> 再度検証</a></li>
<li class="chapter" data-level="5.3.10" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#hikaku_sanko"><i class="fa fa-check"></i><b>5.3.10</b> 参考：グループ解除</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#前年度比の算出"><i class="fa fa-check"></i><b>5.4</b> 前年度比の算出</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#hi_result"><i class="fa fa-check"></i><b>5.4.1</b> 結果の確認</a></li>
<li class="chapter" data-level="5.4.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#前年度比算出の手順"><i class="fa fa-check"></i><b>5.4.2</b> 前年度比算出の手順</a></li>
<li class="chapter" data-level="5.4.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#tejun_sort"><i class="fa fa-check"></i><b>5.4.3</b> 手順１：データのソート</a></li>
<li class="chapter" data-level="5.4.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#tejun_zennenjuu"><i class="fa fa-check"></i><b>5.4.4</b> 手順２：前年従業員数の作成</a></li>
<li class="chapter" data-level="5.4.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#tejun_zennenhi"><i class="fa fa-check"></i><b>5.4.5</b> 手順３：前年度比算出</a></li>
<li class="chapter" data-level="5.4.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#tejun_mibae"><i class="fa fa-check"></i><b>5.4.6</b> 手順４：見栄えを整える</a></li>
<li class="chapter" data-level="5.4.7" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#hi_matome"><i class="fa fa-check"></i><b>5.4.7</b> 前年度比算出まとめ</a></li>
<li class="chapter" data-level="5.4.8" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#zennenhi_sanko"><i class="fa fa-check"></i><b>5.4.8</b> 参考：横持ちで表示</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#データの可視化"><i class="fa fa-check"></i><b>5.5</b> データの可視化</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#なぜデータを可視化するのか"><i class="fa fa-check"></i><b>5.5.1</b> なぜデータを可視化するのか</a></li>
<li class="chapter" data-level="5.5.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#どうやって可視化するのか"><i class="fa fa-check"></i><b>5.5.2</b> どうやって可視化するのか</a></li>
<li class="chapter" data-level="5.5.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#layer_str"><i class="fa fa-check"></i><b>5.5.3</b> ggplotのレイヤー構造</a></li>
<li class="chapter" data-level="5.5.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#dodai"><i class="fa fa-check"></i><b>5.5.4</b> <strong>ggplot</strong>：土台作成</a></li>
<li class="chapter" data-level="5.5.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#aesデータの情報を指定"><i class="fa fa-check"></i><b>5.5.5</b> <strong>aes</strong>：データの情報を指定</a></li>
<li class="chapter" data-level="5.5.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#geom"><i class="fa fa-check"></i><b>5.5.6</b> <strong>geom_＊</strong>：描画</a></li>
<li class="chapter" data-level="5.5.7" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#labs軸名やタイトル"><i class="fa fa-check"></i><b>5.5.7</b> <strong>labs</strong>：軸名やタイトル</a></li>
<li class="chapter" data-level="5.5.8" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#before_facet"><i class="fa fa-check"></i><b>5.5.8</b> <strong>facet</strong>の前に</a></li>
<li class="chapter" data-level="5.5.9" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#facet"><i class="fa fa-check"></i><b>5.5.9</b> <strong>facet</strong>：グループ比較</a></li>
<li class="chapter" data-level="5.5.10" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#可視化のススメ"><i class="fa fa-check"></i><b>5.5.10</b> 可視化のススメ</a></li>
<li class="chapter" data-level="5.5.11" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#kasika_sanko1"><i class="fa fa-check"></i><b>5.5.11</b> 参考１：データの整形</a></li>
<li class="chapter" data-level="5.5.12" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#kasika_sanko2"><i class="fa fa-check"></i><b>5.5.12</b> 参考２：データの比較</a></li>
<li class="chapter" data-level="5.5.13" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#kasika_sanko3"><i class="fa fa-check"></i><b>5.5.13</b> 参考３：適切な可視化</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#ランキングの作成"><i class="fa fa-check"></i><b>5.6</b> ランキングの作成</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_result"><i class="fa fa-check"></i><b>5.6.1</b> 結果の確認</a></li>
<li class="chapter" data-level="5.6.2" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_tejun0"><i class="fa fa-check"></i><b>5.6.2</b> 内容と手順</a></li>
<li class="chapter" data-level="5.6.3" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#ランキング関数"><i class="fa fa-check"></i><b>5.6.3</b> ランキング関数</a></li>
<li class="chapter" data-level="5.6.4" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_tejun1"><i class="fa fa-check"></i><b>5.6.4</b> 手順１：2017年の従業員数が100人以上</a></li>
<li class="chapter" data-level="5.6.5" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_tejun2"><i class="fa fa-check"></i><b>5.6.5</b> 手順２：業種大分類をjoin</a></li>
<li class="chapter" data-level="5.6.6" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_tejun3"><i class="fa fa-check"></i><b>5.6.6</b> 手順３：業種別ランキング作成</a></li>
<li class="chapter" data-level="5.6.7" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#kekka_ranking"><i class="fa fa-check"></i><b>5.6.7</b> ランキングデータ完成</a></li>
<li class="chapter" data-level="5.6.8" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#rank_tejun4"><i class="fa fa-check"></i><b>5.6.8</b> ランキング作成まとめ</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="book_04_intermediate_2nd_half.html"><a href="book_04_intermediate_2nd_half.html#おわり-2"><i class="fa fa-check"></i>おわり</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="environment.html"><a href="environment.html"><i class="fa fa-check"></i>動作環境</a></li>
<li class="divider"></li>
<li><strong><a href="https://www.ds.shiga-u.ac.jp/DEML/">滋賀大学DEMLセンター</a></strong></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">データエンジニアリング人材養成演習補助教材</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sec_04" class="section level1" number="5">
<h1><span class="header-section-number">5</span> 中級編後半</h1>
<div id="作業の確認-1" class="section level2 unnumbered" number="">
<h2>作業の確認</h2>
<div id="中級の作業イメージ-1" class="section level3 unnumbered" number="">
<h3>中級の作業イメージ</h3>
<p>左半分を終えたので、右半分を後半で進めていきます。</p>
<p><img src="pictures/intermediate/story_image.png" /></p>
</div>
<div id="目次中級後半" class="section level3 unnumbered" number="">
<h3>目次（中級後半）</h3>
<ul>
<li>前半の作業のおさらい</li>
<li>タテ持ちデータ・ヨコ持ちデータ</li>
<li>データの検証</li>
<li>前年度比の算出</li>
<li>演習</li>
<li>データの可視化</li>
<li>ランキングの作成</li>
</ul>
</div>
</div>
<div id="前半の作業のおさらい" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> 前半の作業のおさらい</h2>
<div id="複数データの読み込み" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> 複数データの読み込み</h3>
<p>listとfor文を使って複数データを一括で読み込みました。</p>
<p><img src="pictures/intermediate/for_explain.png" /></p>
</div>
<div id="タテ結合とヨコ結合-1" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> タテ結合とヨコ結合</h3>
<p>2通りの方法で複数データを結合し、long_dataとwide_dataを作成しました。</p>
<div class="columns">
<div class="column" style="width:48%;">
<p>bind_rowsでタテに結合
（long_data）</p>
<p><img src="pictures/intermediate/bind_ver.png" /></p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<p>left_joinでヨコに結合
（wide_data）</p>
<p><img src="pictures/intermediate/join_ver.png" /></p>
</div>
</div>
</div>
</div>
<div id="widedata_longdata" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> タテ持ちデータ・ヨコ持ちデータ</h2>
<ul>
<li>データ保持形式を理解し、タテヨコ変換を習得します</li>
<li>pivot_longer</li>
<li>pivot_wider</li>
</ul>
<div id="what_widelong" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> タテ持ち・ヨコ持ちとは</h3>
<ul>
<li>タテ持ちデータとヨコ持ちデータの違いは、<strong>データを保持する形式</strong>の違いだけです</li>
<li>中級前半で作成したlong_dataがタテ持ちデータ、wide_dataがヨコ持ちデータとなっています</li>
<li>スライド上では見やすさのため、従業員数カラムに着目した小規模データで表示しています</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ipnhjzsxtl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ipnhjzsxtl .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ipnhjzsxtl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#ipnhjzsxtl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#ipnhjzsxtl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ipnhjzsxtl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ipnhjzsxtl .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ipnhjzsxtl .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ipnhjzsxtl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ipnhjzsxtl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ipnhjzsxtl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ipnhjzsxtl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ipnhjzsxtl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ipnhjzsxtl .gt_from_md > :first-child {
  margin-top: 0;
}

#ipnhjzsxtl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ipnhjzsxtl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ipnhjzsxtl .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ipnhjzsxtl .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ipnhjzsxtl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ipnhjzsxtl .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ipnhjzsxtl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ipnhjzsxtl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ipnhjzsxtl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ipnhjzsxtl .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ipnhjzsxtl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ipnhjzsxtl .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ipnhjzsxtl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ipnhjzsxtl .gt_left {
  text-align: left;
}

#ipnhjzsxtl .gt_center {
  text-align: center;
}

#ipnhjzsxtl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ipnhjzsxtl .gt_font_normal {
  font-weight: normal;
}

#ipnhjzsxtl .gt_font_bold {
  font-weight: bold;
}

#ipnhjzsxtl .gt_font_italic {
  font-style: italic;
}

#ipnhjzsxtl .gt_super {
  font-size: 65%;
}

#ipnhjzsxtl .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ipnhjzsxtl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>long_data</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1254</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">768</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">376</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#kfhygismoi .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kfhygismoi .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kfhygismoi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#kfhygismoi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#kfhygismoi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kfhygismoi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kfhygismoi .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kfhygismoi .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kfhygismoi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kfhygismoi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kfhygismoi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kfhygismoi .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#kfhygismoi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kfhygismoi .gt_from_md > :first-child {
  margin-top: 0;
}

#kfhygismoi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kfhygismoi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kfhygismoi .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#kfhygismoi .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kfhygismoi .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#kfhygismoi .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kfhygismoi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kfhygismoi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kfhygismoi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kfhygismoi .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kfhygismoi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#kfhygismoi .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kfhygismoi .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#kfhygismoi .gt_left {
  text-align: left;
}

#kfhygismoi .gt_center {
  text-align: center;
}

#kfhygismoi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kfhygismoi .gt_font_normal {
  font-weight: normal;
}

#kfhygismoi .gt_font_bold {
  font-weight: bold;
}

#kfhygismoi .gt_font_italic {
  font-style: italic;
}

#kfhygismoi .gt_super {
  font-size: 65%;
}

#kfhygismoi .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="kfhygismoi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>wide_data</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2012</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2013</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_right">1254</td>
      <td class="gt_row gt_right">768</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_right">82</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="tokutyo_widelong" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> タテ持ち・ヨコ持ちの特徴</h3>
<ul>
<li>タテ：1行から1つの情報を読み取ります</li>
<li>ヨコ：行と列の交差点から1つの情報を読み取ります</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th align="center">特徴項目</th>
<th align="center">タテ</th>
<th align="center">ヨコ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">人間が理解しやすい</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="even">
<td align="center">コンピュータが理解しやすい</td>
<td align="center">○</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="center">excelなどで見慣れた形式</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="even">
<td align="center">新しいデータの追加がしやすい</td>
<td align="center">○</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="center">可視化・機械学習に適している</td>
<td align="center">○</td>
<td align="center">×</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#siwmflwfxx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#siwmflwfxx .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#siwmflwfxx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#siwmflwfxx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#siwmflwfxx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#siwmflwfxx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#siwmflwfxx .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#siwmflwfxx .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#siwmflwfxx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#siwmflwfxx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#siwmflwfxx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#siwmflwfxx .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#siwmflwfxx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#siwmflwfxx .gt_from_md > :first-child {
  margin-top: 0;
}

#siwmflwfxx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#siwmflwfxx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#siwmflwfxx .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#siwmflwfxx .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#siwmflwfxx .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#siwmflwfxx .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#siwmflwfxx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#siwmflwfxx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#siwmflwfxx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#siwmflwfxx .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#siwmflwfxx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#siwmflwfxx .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#siwmflwfxx .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#siwmflwfxx .gt_left {
  text-align: left;
}

#siwmflwfxx .gt_center {
  text-align: center;
}

#siwmflwfxx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#siwmflwfxx .gt_font_normal {
  font-weight: normal;
}

#siwmflwfxx .gt_font_bold {
  font-weight: bold;
}

#siwmflwfxx .gt_font_italic {
  font-style: italic;
}

#siwmflwfxx .gt_super {
  font-size: 65%;
}

#siwmflwfxx .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="siwmflwfxx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>long_data</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1254</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">768</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">376</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
<p><br></p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#adapvuhxgj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adapvuhxgj .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adapvuhxgj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#adapvuhxgj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#adapvuhxgj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adapvuhxgj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adapvuhxgj .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adapvuhxgj .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adapvuhxgj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adapvuhxgj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adapvuhxgj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adapvuhxgj .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#adapvuhxgj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adapvuhxgj .gt_from_md > :first-child {
  margin-top: 0;
}

#adapvuhxgj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adapvuhxgj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adapvuhxgj .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#adapvuhxgj .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adapvuhxgj .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#adapvuhxgj .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adapvuhxgj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adapvuhxgj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adapvuhxgj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adapvuhxgj .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adapvuhxgj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#adapvuhxgj .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adapvuhxgj .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#adapvuhxgj .gt_left {
  text-align: left;
}

#adapvuhxgj .gt_center {
  text-align: center;
}

#adapvuhxgj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adapvuhxgj .gt_font_normal {
  font-weight: normal;
}

#adapvuhxgj .gt_font_bold {
  font-weight: bold;
}

#adapvuhxgj .gt_font_italic {
  font-style: italic;
}

#adapvuhxgj .gt_super {
  font-size: 65%;
}

#adapvuhxgj .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="adapvuhxgj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>wide_data</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2012</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2013</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_right">1254</td>
      <td class="gt_row gt_right">768</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_right">82</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="タテヨコ変換" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> タテ⇔ヨコ変換</h3>
<ul>
<li>以下2点のような理由から、データを自在にタテヨコ変換できるようになる必要があります
<ul>
<li>タテ持ちデータで可視化・機械学習をすることが多い</li>
<li>ヨコ持ちデータでのファイル出力を求められる場合がある</li>
</ul></li>
<li>タテとヨコの変換には、<strong>pivot_longer</strong>と<strong>pivot_wider</strong>という関数を使用します</li>
<li>先にタテヨコ変換のイメージをつかんでもらった後に、上記関数を用いたタテヨコ変換の実装をします</li>
</ul>
</div>
<div id="タテヨコ変換イメージ画像" class="section level3" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> タテヨコ変換イメージ画像</h3>
<p>次頁にgifのモーション画像があります。</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="pictures/intermediate/long_data.png" /></p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<p><img src="pictures/intermediate/wide_data.png" /></p>
</div>
</div>
</div>
<div id="image_wide_long_2" class="section level3" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> タテヨコ変換イメージgif</h3>
<div class="columns">
<div class="column" style="width:48%;">
<p><img src="pictures/intermediate/tidyr-spread-gather.gif" /></p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<ul>
<li>ヨコ→タテは、選択したカラム名でkeyカラムを作り、選択したカラム名にあったデータでvalueカラムを作る操作です</li>
<li>タテ→ヨコは、選択したkeyカラムのデータをカラム化し、選択したvalueカラムのデータを行と列に対応した位置へ移動します</li>
</ul>
</div>
</div>
</div>
<div id="image_jisso" class="section level3" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> タテヨコ変換実装</h3>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="book_04_intermediate_2nd_half.html#cb343-1"></a>wide_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb343-2"><a href="book_04_intermediate_2nd_half.html#cb343-2"></a><span class="st">  </span><span class="kw">select</span>(企業コード,</span>
<span id="cb343-3"><a href="book_04_intermediate_2nd_half.html#cb343-3"></a>      <span class="kw">contains</span>(<span class="st">&quot;従業員数&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb343-4"><a href="book_04_intermediate_2nd_half.html#cb343-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb343-5"><a href="book_04_intermediate_2nd_half.html#cb343-5"></a>    <span class="dt">cols =</span> <span class="op">-</span><span class="st">&quot;企業コード&quot;</span>, </span>
<span id="cb343-6"><a href="book_04_intermediate_2nd_half.html#cb343-6"></a>    <span class="dt">names_to =</span> <span class="st">&quot;year&quot;</span>, </span>
<span id="cb343-7"><a href="book_04_intermediate_2nd_half.html#cb343-7"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;従業員数_&quot;</span>,</span>
<span id="cb343-8"><a href="book_04_intermediate_2nd_half.html#cb343-8"></a>    <span class="dt">values_to =</span> <span class="st">&quot;従業員数&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="book_04_intermediate_2nd_half.html#cb344-1"></a>long_data <span class="op">%&gt;%</span></span>
<span id="cb344-2"><a href="book_04_intermediate_2nd_half.html#cb344-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="st">&quot;企業コード&quot;</span>,</span>
<span id="cb344-3"><a href="book_04_intermediate_2nd_half.html#cb344-3"></a>         <span class="st">&quot;year&quot;</span>,<span class="st">&quot;従業員数&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb344-4"><a href="book_04_intermediate_2nd_half.html#cb344-4"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb344-5"><a href="book_04_intermediate_2nd_half.html#cb344-5"></a>    <span class="dt">names_from=</span><span class="st">&quot;year&quot;</span>, </span>
<span id="cb344-6"><a href="book_04_intermediate_2nd_half.html#cb344-6"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;従業員数_&quot;</span>,</span>
<span id="cb344-7"><a href="book_04_intermediate_2nd_half.html#cb344-7"></a>    <span class="dt">values_from=</span><span class="st">&quot;従業員数&quot;</span>)</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:43%;">
<p>詳細は次頁で解説します</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#cwaxkigxba .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cwaxkigxba .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cwaxkigxba .gt_title {
  color: #333333;
  font-size: 12px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#cwaxkigxba .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#cwaxkigxba .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cwaxkigxba .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cwaxkigxba .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cwaxkigxba .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cwaxkigxba .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cwaxkigxba .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cwaxkigxba .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cwaxkigxba .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#cwaxkigxba .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cwaxkigxba .gt_from_md > :first-child {
  margin-top: 0;
}

#cwaxkigxba .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cwaxkigxba .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cwaxkigxba .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#cwaxkigxba .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwaxkigxba .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#cwaxkigxba .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cwaxkigxba .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cwaxkigxba .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cwaxkigxba .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cwaxkigxba .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cwaxkigxba .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#cwaxkigxba .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cwaxkigxba .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#cwaxkigxba .gt_left {
  text-align: left;
}

#cwaxkigxba .gt_center {
  text-align: center;
}

#cwaxkigxba .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cwaxkigxba .gt_font_normal {
  font-weight: normal;
}

#cwaxkigxba .gt_font_bold {
  font-weight: bold;
}

#cwaxkigxba .gt_font_italic {
  font-style: italic;
}

#cwaxkigxba .gt_super {
  font-size: 65%;
}

#cwaxkigxba .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="cwaxkigxba" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>long_data</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1254</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">768</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">376</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#yxfnulstsu .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yxfnulstsu .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yxfnulstsu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#yxfnulstsu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#yxfnulstsu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yxfnulstsu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yxfnulstsu .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yxfnulstsu .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yxfnulstsu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yxfnulstsu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yxfnulstsu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yxfnulstsu .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#yxfnulstsu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yxfnulstsu .gt_from_md > :first-child {
  margin-top: 0;
}

#yxfnulstsu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yxfnulstsu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yxfnulstsu .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#yxfnulstsu .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yxfnulstsu .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#yxfnulstsu .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yxfnulstsu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yxfnulstsu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yxfnulstsu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yxfnulstsu .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yxfnulstsu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#yxfnulstsu .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yxfnulstsu .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#yxfnulstsu .gt_left {
  text-align: left;
}

#yxfnulstsu .gt_center {
  text-align: center;
}

#yxfnulstsu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yxfnulstsu .gt_font_normal {
  font-weight: normal;
}

#yxfnulstsu .gt_font_bold {
  font-weight: bold;
}

#yxfnulstsu .gt_font_italic {
  font-style: italic;
}

#yxfnulstsu .gt_super {
  font-size: 65%;
}

#yxfnulstsu .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="yxfnulstsu" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>wide_data</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2012</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2013</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_right">1254</td>
      <td class="gt_row gt_right">768</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_right">82</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="wide_to_long" class="section level3" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> <strong>pivot_longer</strong>でヨコ → タテ変換</h3>
<table>
<thead>
<tr class="header">
<th align="left">引数</th>
<th align="left">意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cols</td>
<td align="left">keyカラムに格納するカラム名を、select関数と同様にして選択</td>
</tr>
<tr class="even">
<td align="left">names_to</td>
<td align="left">keyカラムのカラム名を指定</td>
</tr>
<tr class="odd">
<td align="left">names_prefix</td>
<td align="left">colsで選択したカラム名から消去したい接頭辞を指定</td>
</tr>
<tr class="even">
<td align="left">values_to</td>
<td align="left">valueカラムのカラム名を指定</td>
</tr>
</tbody>
</table>
<div class="columns">
<div class="column" style="width:55%;">
<p><br></p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="book_04_intermediate_2nd_half.html#cb345-1"></a>wide_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb345-2"><a href="book_04_intermediate_2nd_half.html#cb345-2"></a><span class="st">  </span><span class="kw">select</span>(企業コード,</span>
<span id="cb345-3"><a href="book_04_intermediate_2nd_half.html#cb345-3"></a>      <span class="kw">contains</span>(<span class="st">&quot;従業員数&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb345-4"><a href="book_04_intermediate_2nd_half.html#cb345-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb345-5"><a href="book_04_intermediate_2nd_half.html#cb345-5"></a>    <span class="dt">cols =</span> <span class="op">-</span><span class="st">&quot;企業コード&quot;</span>, </span>
<span id="cb345-6"><a href="book_04_intermediate_2nd_half.html#cb345-6"></a>    <span class="dt">names_to =</span> <span class="st">&quot;year&quot;</span>, </span>
<span id="cb345-7"><a href="book_04_intermediate_2nd_half.html#cb345-7"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;従業員数_&quot;</span>,</span>
<span id="cb345-8"><a href="book_04_intermediate_2nd_half.html#cb345-8"></a>    <span class="dt">values_to =</span> <span class="st">&quot;従業員数&quot;</span>) </span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:35%;">
<p><br></p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ondfzhvgiq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 20px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ondfzhvgiq .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ondfzhvgiq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#ondfzhvgiq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#ondfzhvgiq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ondfzhvgiq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ondfzhvgiq .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ondfzhvgiq .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ondfzhvgiq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ondfzhvgiq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ondfzhvgiq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ondfzhvgiq .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ondfzhvgiq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ondfzhvgiq .gt_from_md > :first-child {
  margin-top: 0;
}

#ondfzhvgiq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ondfzhvgiq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ondfzhvgiq .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ondfzhvgiq .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ondfzhvgiq .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ondfzhvgiq .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ondfzhvgiq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ondfzhvgiq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ondfzhvgiq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ondfzhvgiq .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ondfzhvgiq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ondfzhvgiq .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ondfzhvgiq .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ondfzhvgiq .gt_left {
  text-align: left;
}

#ondfzhvgiq .gt_center {
  text-align: center;
}

#ondfzhvgiq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ondfzhvgiq .gt_font_normal {
  font-weight: normal;
}

#ondfzhvgiq .gt_font_bold {
  font-weight: bold;
}

#ondfzhvgiq .gt_font_italic {
  font-style: italic;
}

#ondfzhvgiq .gt_super {
  font-size: 65%;
}

#ondfzhvgiq .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ondfzhvgiq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>long_data</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1254</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">768</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">376</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="long_to_wide" class="section level3" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> <strong>pivot_wider</strong>でタテ → ヨコ変換</h3>
<table>
<thead>
<tr class="header">
<th align="left">引数</th>
<th align="left">意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">names_from</td>
<td align="left">カラム化したいデータが入っているカラム名(keyカラム)を指定</td>
</tr>
<tr class="even">
<td align="left">names_prefix</td>
<td align="left">付与する接頭辞を指定</td>
</tr>
<tr class="odd">
<td align="left">values_from</td>
<td align="left">行と列で対応させたいデータのカラム名を指定</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="book_04_intermediate_2nd_half.html#cb346-1"></a>long_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="st">&quot;企業コード&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;従業員数&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb346-2"><a href="book_04_intermediate_2nd_half.html#cb346-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from=</span><span class="st">&quot;year&quot;</span>, </span>
<span id="cb346-3"><a href="book_04_intermediate_2nd_half.html#cb346-3"></a>              <span class="dt">names_prefix =</span> <span class="st">&quot;従業員数_&quot;</span>,</span>
<span id="cb346-4"><a href="book_04_intermediate_2nd_half.html#cb346-4"></a>              <span class="dt">values_from=</span><span class="st">&quot;従業員数&quot;</span>)</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vihnfnafxk .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 20px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vihnfnafxk .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vihnfnafxk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#vihnfnafxk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#vihnfnafxk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vihnfnafxk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vihnfnafxk .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vihnfnafxk .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vihnfnafxk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vihnfnafxk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vihnfnafxk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vihnfnafxk .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vihnfnafxk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vihnfnafxk .gt_from_md > :first-child {
  margin-top: 0;
}

#vihnfnafxk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vihnfnafxk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vihnfnafxk .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#vihnfnafxk .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vihnfnafxk .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#vihnfnafxk .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vihnfnafxk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vihnfnafxk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vihnfnafxk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vihnfnafxk .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vihnfnafxk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#vihnfnafxk .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vihnfnafxk .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#vihnfnafxk .gt_left {
  text-align: left;
}

#vihnfnafxk .gt_center {
  text-align: center;
}

#vihnfnafxk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vihnfnafxk .gt_font_normal {
  font-weight: normal;
}

#vihnfnafxk .gt_font_bold {
  font-weight: bold;
}

#vihnfnafxk .gt_font_italic {
  font-style: italic;
}

#vihnfnafxk .gt_super {
  font-size: 65%;
}

#vihnfnafxk .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="vihnfnafxk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>wide_data</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2012</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2013</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数_2014</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_right">1254</td>
      <td class="gt_row gt_right">768</td>
      <td class="gt_row gt_right">1242</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_right">82</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">374</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
<div id="研磨データの比較検証" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> 研磨データの比較検証</h2>
<ul>
<li>データの比較検証方法を習得します</li>
</ul>
<div id="比較検証をする理由" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> 比較検証をする理由</h3>
<ul>
<li>世の中に「研磨データの正解データ」はありません</li>
<li>そのため研磨データの正確性を担保するために、2人以上で研磨データを作成して比較検証をおこなう（ダブルチェック）ことがあります</li>
</ul>
</div>
<div id="比較検証をする方法" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> 比較検証をする方法</h3>
<ul>
<li>比較検証の練習として、long_dataと、wide_dataをタテ持ち変換したデータの比較検証を行います</li>
<li>前節のとおり、タテ持ちとヨコ持ちの違いは<strong>データを保持する形式の違い</strong>だけなので、データ保持形式を揃えたらデータが一致するはずだからです</li>
<li>なおデータ比較の際には、以下の項目を事前にそろえておく必要があります
<ul>
<li>カラムの名前・順番・型、レコードの順番</li>
</ul></li>
<li>ここでは<strong>diffdf</strong>パッケージを用いてデータの比較検証をおこなうので、diffdfのインストールと読み込みをします</li>
</ul>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="book_04_intermediate_2nd_half.html#cb347-1"></a><span class="co"># install.packages(&quot;diffdf&quot;) # diffdfのインストール</span></span>
<span id="cb347-2"><a href="book_04_intermediate_2nd_half.html#cb347-2"></a><span class="kw">library</span>(diffdf) <span class="co"># diffdfの読み込み</span></span></code></pre></div>
</div>
<div id="検証データの作成long_data" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> 検証データの作成：long_data</h3>
<ul>
<li>まずはlong_dataから検証データを作成します</li>
<li>練習なので、従業員数カラムに注目して検証します</li>
<li>long_dataからlong_emp_lを、以下の仕様で作成します
<ul>
<li>企業コード, year, 従業員数の3つのカラムを選択</li>
<li>企業コードとyearでソート</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:46%;">
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="book_04_intermediate_2nd_half.html#cb348-1"></a>long_emp_l &lt;-</span>
<span id="cb348-2"><a href="book_04_intermediate_2nd_half.html#cb348-2"></a><span class="st">  </span>long_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb348-3"><a href="book_04_intermediate_2nd_half.html#cb348-3"></a><span class="st">  </span><span class="kw">select</span>(企業コード, </span>
<span id="cb348-4"><a href="book_04_intermediate_2nd_half.html#cb348-4"></a>         year,</span>
<span id="cb348-5"><a href="book_04_intermediate_2nd_half.html#cb348-5"></a>         従業員数) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb348-6"><a href="book_04_intermediate_2nd_half.html#cb348-6"></a><span class="st">  </span><span class="kw">arrange</span>(企業コード, year)</span></code></pre></div>
</div><div class="column" style="width:1%;">

</div><div class="column" style="width:53%;">
<p>long_emp_l</p>
<pre><code># A tibble: 14,972 x 3
   企業コード year  従業員数
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;
 1 B02111302  2012      1254
 2 B02111302  2013       768
 3 B02111302  2014      1242
 4 B02111302  2015      1409
 5 B02111302  2016       728
 6 B02111302  2017      1401
 7 B02111302  2018      1096
 8 B02117802  2012        82
 9 B02117802  2013       376
10 B02117802  2014       374
# ... with 14,962 more rows</code></pre>
</div>
</div>
</div>
<div id="wide_data2" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> 検証データの作成：wide_data</h3>
<ul>
<li>次にwide_dataをタテ変換してlong_emp_wを作成します</li>
<li>こちらもlong_emp_lと同様の仕様で作成します</li>
</ul>
<div class="columns">
<div class="column" style="width:48;">
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="book_04_intermediate_2nd_half.html#cb350-1"></a>long_emp_w &lt;-</span>
<span id="cb350-2"><a href="book_04_intermediate_2nd_half.html#cb350-2"></a><span class="st">  </span>wide_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb350-3"><a href="book_04_intermediate_2nd_half.html#cb350-3"></a><span class="st">  </span><span class="kw">select</span>(企業コード,</span>
<span id="cb350-4"><a href="book_04_intermediate_2nd_half.html#cb350-4"></a>      <span class="kw">contains</span>(<span class="st">&quot;従業員数&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb350-5"><a href="book_04_intermediate_2nd_half.html#cb350-5"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb350-6"><a href="book_04_intermediate_2nd_half.html#cb350-6"></a>    <span class="dt">cols =</span> <span class="op">-</span>企業コード,</span>
<span id="cb350-7"><a href="book_04_intermediate_2nd_half.html#cb350-7"></a>    <span class="dt">names_to =</span> <span class="st">&quot;year&quot;</span>, </span>
<span id="cb350-8"><a href="book_04_intermediate_2nd_half.html#cb350-8"></a>    <span class="dt">values_to =</span> <span class="st">&quot;従業員数&quot;</span>,</span>
<span id="cb350-9"><a href="book_04_intermediate_2nd_half.html#cb350-9"></a>    <span class="dt">names_prefix=</span><span class="st">&quot;従業員数_&quot;</span>)<span class="op">%&gt;%</span></span>
<span id="cb350-10"><a href="book_04_intermediate_2nd_half.html#cb350-10"></a><span class="st">  </span><span class="kw">arrange</span>(企業コード, year)</span></code></pre></div>
</div><div class="column" style="width:1%;">

</div><div class="column" style="width:50%;">
<p>long_emp_w</p>
<pre><code># A tibble: 15,232 x 3
   企業コード year  従業員数
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;
 1 B02111302  2012      1254
 2 B02111302  2013       768
 3 B02111302  2014      1242
 4 B02111302  2015      1409
 5 B02111302  2016       728
 6 B02111302  2017      1401
 7 B02111302  2018      1096
 8 B02117802  2012        82
 9 B02117802  2013       376
10 B02117802  2014       374
# ... with 15,222 more rows</code></pre>
</div>
</div>
</div>
<div id="diffdfで一致確認" class="section level3" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> diffdfで一致確認</h3>
<ul>
<li>long_dataと、wide_dataをタテ持ちデータにしたものを比較検証すると、一致しなかったデータに関するメッセージがたくさん出てきました</li>
<li>なぜ一致しないのか確認していきましょう</li>
</ul>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="book_04_intermediate_2nd_half.html#cb352-1"></a><span class="kw">library</span>(diffdf)</span>
<span id="cb352-2"><a href="book_04_intermediate_2nd_half.html#cb352-2"></a><span class="kw">diffdf</span>(long_emp_l, long_emp_w)</span></code></pre></div>
<pre><code>Differences found between the objects!

A summary is given below.

There are rows in COMPARE that are not in BASE !!
First 10 of 260 rows are shown in table below

  ===============
   ..ROWNUMBER.. 
  ---------------
       14973     
       14974     
       14975     
       14976     
       14977     
       14978     
       14979     
       14980     
       14981     
       14982     
  ---------------

Not all Values Compared Equal
All rows are shown in table below

  =============================
   Variable  No of Differences 
  -----------------------------
    企業コード          14335       
     year          12912       
     従業員数          14911       
  -----------------------------


First 10 of 14335 rows are shown in table below

  ===============================================
   VARIABLE  ..ROWNUMBER..    BASE      COMPARE  
  -----------------------------------------------
    企業コード         15        B02119859  B02122250 
    企業コード         22        B02122250  B02122602 
    企業コード         29        B02122602  B02124175 
    企業コード         34        B02125529  B02124175 
    企業コード         35        B02125529  B02124175 
    企業コード         41        B02128716  B02125529 
    企業コード         42        B02128716  B02125529 
    企業コード         48        B02129789  B02128716 
    企業コード         49        B02129789  B02128716 
    企業コード         55        B02153443  B02129789 
  -----------------------------------------------


First 10 of 12912 rows are shown in table below

  ========================================
   VARIABLE  ..ROWNUMBER..  BASE  COMPARE 
  ----------------------------------------
     year         15        2018   2012   
     year         16        2012   2013   
     year         17        2013   2014   
     year         18        2014   2015   
     year         19        2015   2016   
     year         20        2016   2017   
     year         21        2017   2018   
     year         22        2018   2012   
     year         23        2012   2013   
     year         24        2013   2014   
  ----------------------------------------


First 10 of 14911 rows are shown in table below

  =========================================
   VARIABLE  ..ROWNUMBER..  BASE   COMPARE 
  -----------------------------------------
     従業員数         15          205     790  
     従業員数         16          790     690  
     従業員数         17          690    1074  
     従業員数         18         1074    1123  
     従業員数         19         1123     297  
     従業員数         20          297     523  
     従業員数         21          523     695  
     従業員数         22          695   23216  
     従業員数         23        23216    4217  
     従業員数         24         4217    6092  
  -----------------------------------------</code></pre>
</div>
<div id="不一致の原因" class="section level3" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> 不一致の原因</h3>
<ul>
<li>レコード数が異なることやレコードがズレていることから、タテとヨコのデータの結合方法の違いが不一致の原因と考えられます</li>
<li>たとえば企業コードが“B02119859”のデータは、long_dataにはありますがwide_dataにはありません</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="book_04_intermediate_2nd_half.html#cb354-1"></a>long_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-2"><a href="book_04_intermediate_2nd_half.html#cb354-2"></a><span class="st">  </span><span class="kw">filter</span>(</span>
<span id="cb354-3"><a href="book_04_intermediate_2nd_half.html#cb354-3"></a>    企業コード<span class="op">==</span><span class="st">&quot;B02119859&quot;</span></span>
<span id="cb354-4"><a href="book_04_intermediate_2nd_half.html#cb354-4"></a>    ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-5"><a href="book_04_intermediate_2nd_half.html#cb354-5"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<pre><code>[1] 1</code></pre>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="book_04_intermediate_2nd_half.html#cb356-1"></a>wide_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb356-2"><a href="book_04_intermediate_2nd_half.html#cb356-2"></a><span class="st">  </span><span class="kw">filter</span>(</span>
<span id="cb356-3"><a href="book_04_intermediate_2nd_half.html#cb356-3"></a>    企業コード<span class="op">==</span><span class="st">&quot;B02119859&quot;</span></span>
<span id="cb356-4"><a href="book_04_intermediate_2nd_half.html#cb356-4"></a>    ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb356-5"><a href="book_04_intermediate_2nd_half.html#cb356-5"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<pre><code>[1] 0</code></pre>
</div>
</div>
</div>
<div id="不一致の理由" class="section level3" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> 不一致の理由</h3>
<ul>
<li>long_dataは全データをタテ結合したので、「2012年の企業コード以外」の「企業コード」も存在します</li>
<li>wide_dataは2012年の企業コードをキーにしてleft_joinでヨコ結合したので、「2012年のデータにある企業コード」のみが存在します</li>
</ul>
<p>データを一致させるために、「2012年から2018年までの7年ぶんのレコードがすべて存在するデータ」という条件で絞って再度検証してみましょう</p>
</div>
<div id="条件を揃える準備" class="section level3" number="5.3.8">
<h3><span class="header-section-number">5.3.8</span> 条件を揃える準備</h3>
<ul>
<li>7年ぶんのレコードが揃っている企業コードを抽出します</li>
</ul>
<div class="columns">
<div class="column" style="width:44%;">
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="book_04_intermediate_2nd_half.html#cb358-1"></a>code_7year &lt;-</span>
<span id="cb358-2"><a href="book_04_intermediate_2nd_half.html#cb358-2"></a><span class="st">  </span>long_emp_l <span class="op">%&gt;%</span></span>
<span id="cb358-3"><a href="book_04_intermediate_2nd_half.html#cb358-3"></a><span class="st">  </span><span class="kw">group_by</span>(企業コード) <span class="op">%&gt;%</span></span>
<span id="cb358-4"><a href="book_04_intermediate_2nd_half.html#cb358-4"></a><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></span>
<span id="cb358-5"><a href="book_04_intermediate_2nd_half.html#cb358-5"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">==</span><span class="st"> </span><span class="dv">7</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb358-6"><a href="book_04_intermediate_2nd_half.html#cb358-6"></a><span class="st">  </span><span class="kw">ungroup</span>() </span>
<span id="cb358-7"><a href="book_04_intermediate_2nd_half.html#cb358-7"></a><span class="co"># グループ解除(参考参照)</span></span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:54%;">
<pre><code># A tibble: 1,788 x 2
   企業コード     n
   &lt;chr&gt;      &lt;int&gt;
 1 B02111302      7
 2 B02117802      7
 3 B02122250      7
 4 B02122602      7
 5 B02125529      7
 6 B02128716      7
 7 B02129789      7
 8 B02153443      7
 9 B02505784      7
10 B02514384      7
# ... with 1,778 more rows</code></pre>
</div>
</div>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="book_04_intermediate_2nd_half.html#cb360-1"></a><span class="co"># nは不要なので消しておきます</span></span>
<span id="cb360-2"><a href="book_04_intermediate_2nd_half.html#cb360-2"></a>code_7year &lt;-<span class="st"> </span>code_7year <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>n)</span></code></pre></div>
</div>
<div id="再度検証" class="section level3" number="5.3.9">
<h3><span class="header-section-number">5.3.9</span> 再度検証</h3>
<ul>
<li>7年ぶん揃っている企業コードのcode_7yearに対して、“企業コード”をキーにlong_emp_lとlong_emp_wをそれぞれleft_joinすることで、条件を満たすデータを抽出します</li>
<li>条件を合わせたデータで再度検証したところ、データが一致したことが確認できました</li>
</ul>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="book_04_intermediate_2nd_half.html#cb361-1"></a>long_emp_l &lt;-<span class="st"> </span>code_7year <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(long_emp_l, <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>)</span>
<span id="cb361-2"><a href="book_04_intermediate_2nd_half.html#cb361-2"></a>long_emp_w &lt;-<span class="st"> </span>code_7year <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(long_emp_w, <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>)</span>
<span id="cb361-3"><a href="book_04_intermediate_2nd_half.html#cb361-3"></a><span class="kw">diffdf</span>(long_emp_l, long_emp_w)</span></code></pre></div>
<pre><code>No issues were found!</code></pre>
</div>
<div id="hikaku_sanko" class="section level3" number="5.3.10">
<h3><span class="header-section-number">5.3.10</span> 参考：グループ解除</h3>
<ul>
<li>group_byを使ってグループ化されたデータは、ungroupするまでグループ化が継続されます</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="book_04_intermediate_2nd_half.html#cb363-1"></a>code_7year_g &lt;-</span>
<span id="cb363-2"><a href="book_04_intermediate_2nd_half.html#cb363-2"></a><span class="st">  </span>long_emp_l <span class="op">%&gt;%</span></span>
<span id="cb363-3"><a href="book_04_intermediate_2nd_half.html#cb363-3"></a><span class="st">  </span><span class="kw">group_by</span>(企業コード) <span class="op">%&gt;%</span></span>
<span id="cb363-4"><a href="book_04_intermediate_2nd_half.html#cb363-4"></a><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></span>
<span id="cb363-5"><a href="book_04_intermediate_2nd_half.html#cb363-5"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">==</span><span class="st"> </span><span class="dv">7</span>) </span>
<span id="cb363-6"><a href="book_04_intermediate_2nd_half.html#cb363-6"></a>code_7year_g</span></code></pre></div>
<pre><code># A tibble: 1,788 x 2
# Groups:   企業コード [1,788]
   企業コード     n
   &lt;chr&gt;      &lt;int&gt;
 1 B02111302      7
 2 B02117802      7
 3 B02122250      7
 4 B02122602      7
 5 B02125529      7
 6 B02128716      7
 7 B02129789      7
 8 B02153443      7
 9 B02505784      7
10 B02514384      7
# ... with 1,778 more rows</code></pre>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="book_04_intermediate_2nd_half.html#cb365-1"></a>code_7year_ug &lt;-</span>
<span id="cb365-2"><a href="book_04_intermediate_2nd_half.html#cb365-2"></a><span class="st">  </span>long_emp_l <span class="op">%&gt;%</span></span>
<span id="cb365-3"><a href="book_04_intermediate_2nd_half.html#cb365-3"></a><span class="st">  </span><span class="kw">group_by</span>(企業コード) <span class="op">%&gt;%</span></span>
<span id="cb365-4"><a href="book_04_intermediate_2nd_half.html#cb365-4"></a><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></span>
<span id="cb365-5"><a href="book_04_intermediate_2nd_half.html#cb365-5"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">==</span><span class="st"> </span><span class="dv">7</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb365-6"><a href="book_04_intermediate_2nd_half.html#cb365-6"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb365-7"><a href="book_04_intermediate_2nd_half.html#cb365-7"></a>code_7year_ug</span></code></pre></div>
<pre><code># A tibble: 1,788 x 2
   企業コード     n
   &lt;chr&gt;      &lt;int&gt;
 1 B02111302      7
 2 B02117802      7
 3 B02122250      7
 4 B02122602      7
 5 B02125529      7
 6 B02128716      7
 7 B02129789      7
 8 B02153443      7
 9 B02505784      7
10 B02514384      7
# ... with 1,778 more rows</code></pre>
</div>
</div>
<hr />
<ul>
<li>group化されたデータに対してjoinをしても、group化は勝手に解除されることはないので注意しましょう</li>
<li>group化が残っていると、意図せぬに挙動になることがままあります</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="book_04_intermediate_2nd_half.html#cb367-1"></a>code_7year_g <span class="op">%&gt;%</span></span>
<span id="cb367-2"><a href="book_04_intermediate_2nd_half.html#cb367-2"></a><span class="st">  </span><span class="kw">left_join</span>(long_emp_l,</span>
<span id="cb367-3"><a href="book_04_intermediate_2nd_half.html#cb367-3"></a>            <span class="dt">by=</span><span class="st">&quot;企業コード&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 12,516 x 4
# Groups:   企業コード [1,788]
   企業コード     n year  従業員数
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
 1 B02111302      7 2012      1254
 2 B02111302      7 2013       768
 3 B02111302      7 2014      1242
 4 B02111302      7 2015      1409
 5 B02111302      7 2016       728
 6 B02111302      7 2017      1401
 7 B02111302      7 2018      1096
 8 B02117802      7 2012        82
 9 B02117802      7 2013       376
10 B02117802      7 2014       374
# ... with 12,506 more rows</code></pre>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="book_04_intermediate_2nd_half.html#cb369-1"></a>code_7year_ug <span class="op">%&gt;%</span></span>
<span id="cb369-2"><a href="book_04_intermediate_2nd_half.html#cb369-2"></a><span class="st">  </span><span class="kw">left_join</span>(long_emp_l,</span>
<span id="cb369-3"><a href="book_04_intermediate_2nd_half.html#cb369-3"></a>            <span class="dt">by=</span><span class="st">&quot;企業コード&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 12,516 x 4
   企業コード     n year  従業員数
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
 1 B02111302      7 2012      1254
 2 B02111302      7 2013       768
 3 B02111302      7 2014      1242
 4 B02111302      7 2015      1409
 5 B02111302      7 2016       728
 6 B02111302      7 2017      1401
 7 B02111302      7 2018      1096
 8 B02117802      7 2012        82
 9 B02117802      7 2013       376
10 B02117802      7 2014       374
# ... with 12,506 more rows</code></pre>
</div>
</div>
</div>
</div>
<div id="前年度比の算出" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> 前年度比の算出</h2>
<ul>
<li>整った複数年の結合データで指標を算出します</li>
</ul>
<div id="hi_result" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> 結果の確認</h3>
<div class="columns">
<div class="column" style="width:48%;">
<ul>
<li>右のように、long_empに従業員数伸び率カラムを作成します</li>
<li>従業員数伸び率カラムは、企業コードごとに<span class="math inline">\(\frac{\mbox{n年の従業員数}}{\mbox{n-1年の従業員数}}\)</span>で算出します</li>
</ul>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wdokouuggg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 22px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wdokouuggg .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wdokouuggg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#wdokouuggg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#wdokouuggg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wdokouuggg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wdokouuggg .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 26px;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wdokouuggg .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 26px;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wdokouuggg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wdokouuggg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wdokouuggg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wdokouuggg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wdokouuggg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wdokouuggg .gt_from_md > :first-child {
  margin-top: 0;
}

#wdokouuggg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wdokouuggg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wdokouuggg .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wdokouuggg .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wdokouuggg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wdokouuggg .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wdokouuggg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wdokouuggg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wdokouuggg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wdokouuggg .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wdokouuggg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wdokouuggg .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wdokouuggg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wdokouuggg .gt_left {
  text-align: left;
}

#wdokouuggg .gt_center {
  text-align: center;
}

#wdokouuggg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wdokouuggg .gt_font_normal {
  font-weight: normal;
}

#wdokouuggg .gt_font_bold {
  font-weight: bold;
}

#wdokouuggg .gt_font_italic {
  font-style: italic;
}

#wdokouuggg .gt_super {
  font-size: 65%;
}

#wdokouuggg .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="wdokouuggg" style="overflow-x:auto;overflow-y:auto;width:auto;height:500px;"><table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>long_emp</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style></th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1254</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">768</td>
      <td class="gt_row gt_right">0.612</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1242</td>
      <td class="gt_row gt_right">1.617</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">1409</td>
      <td class="gt_row gt_right">1.134</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">728</td>
      <td class="gt_row gt_right">0.517</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">1401</td>
      <td class="gt_row gt_right">1.924</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">1096</td>
      <td class="gt_row gt_right">0.782</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">82</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">4.585</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">374</td>
      <td class="gt_row gt_right">0.995</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">294</td>
      <td class="gt_row gt_right">0.786</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">422</td>
      <td class="gt_row gt_right">1.435</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">233</td>
      <td class="gt_row gt_right">0.552</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">173</td>
      <td class="gt_row gt_right">0.742</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">790</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">690</td>
      <td class="gt_row gt_right">0.873</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1074</td>
      <td class="gt_row gt_right">1.557</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">1123</td>
      <td class="gt_row gt_right">1.046</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">297</td>
      <td class="gt_row gt_right">0.264</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">523</td>
      <td class="gt_row gt_right">1.761</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">695</td>
      <td class="gt_row gt_right">1.329</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">23216</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">4217</td>
      <td class="gt_row gt_right">0.182</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">6092</td>
      <td class="gt_row gt_right">1.445</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">710</td>
      <td class="gt_row gt_right">0.117</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">17013</td>
      <td class="gt_row gt_right">23.962</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">7564</td>
      <td class="gt_row gt_right">0.445</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">12493</td>
      <td class="gt_row gt_right">1.652</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">2977</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">2762</td>
      <td class="gt_row gt_right">0.928</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">1369</td>
      <td class="gt_row gt_right">0.496</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">1466</td>
      <td class="gt_row gt_right">1.071</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">2211</td>
      <td class="gt_row gt_right">1.508</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">2274</td>
      <td class="gt_row gt_right">1.028</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">2472</td>
      <td class="gt_row gt_right">1.087</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">299</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">280</td>
      <td class="gt_row gt_right">0.936</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">42</td>
      <td class="gt_row gt_right">0.150</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">401</td>
      <td class="gt_row gt_right">9.548</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">327</td>
      <td class="gt_row gt_right">0.815</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">261</td>
      <td class="gt_row gt_right">0.798</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">376</td>
      <td class="gt_row gt_right">1.441</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">683</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">1022</td>
      <td class="gt_row gt_right">1.496</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">893</td>
      <td class="gt_row gt_right">0.874</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">789</td>
      <td class="gt_row gt_right">0.884</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">1091</td>
      <td class="gt_row gt_right">1.383</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">645</td>
      <td class="gt_row gt_right">0.591</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">986</td>
      <td class="gt_row gt_right">1.529</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1787</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">3066</td>
      <td class="gt_row gt_right">1.716</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">4522</td>
      <td class="gt_row gt_right">1.475</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">6582</td>
      <td class="gt_row gt_right">1.456</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">3606</td>
      <td class="gt_row gt_right">0.548</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">3960</td>
      <td class="gt_row gt_right">1.098</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">5563</td>
      <td class="gt_row gt_right">1.405</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">340</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">636</td>
      <td class="gt_row gt_right">1.871</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">990</td>
      <td class="gt_row gt_right">1.557</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">681</td>
      <td class="gt_row gt_right">0.688</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">498</td>
      <td class="gt_row gt_right">0.731</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">902</td>
      <td class="gt_row gt_right">1.811</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">728</td>
      <td class="gt_row gt_right">0.807</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">18</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">160</td>
      <td class="gt_row gt_right">8.889</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">81</td>
      <td class="gt_row gt_right">0.506</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">316</td>
      <td class="gt_row gt_right">3.901</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">238</td>
      <td class="gt_row gt_right">0.753</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">154</td>
      <td class="gt_row gt_right">0.647</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">324</td>
      <td class="gt_row gt_right">2.104</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">4241</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">2705</td>
      <td class="gt_row gt_right">0.638</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">2048</td>
      <td class="gt_row gt_right">0.757</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">2047</td>
      <td class="gt_row gt_right">1.000</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">3418</td>
      <td class="gt_row gt_right">1.670</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">955</td>
      <td class="gt_row gt_right">0.279</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">3454</td>
      <td class="gt_row gt_right">3.617</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">2479</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">3915</td>
      <td class="gt_row gt_right">1.579</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">2430</td>
      <td class="gt_row gt_right">0.621</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">2792</td>
      <td class="gt_row gt_right">1.149</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">1246</td>
      <td class="gt_row gt_right">0.446</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">187</td>
      <td class="gt_row gt_right">0.150</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">730</td>
      <td class="gt_row gt_right">3.904</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">855</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">810</td>
      <td class="gt_row gt_right">0.947</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">643</td>
      <td class="gt_row gt_right">0.794</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">422</td>
      <td class="gt_row gt_right">0.656</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">724</td>
      <td class="gt_row gt_right">1.716</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">616</td>
      <td class="gt_row gt_right">0.851</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">455</td>
      <td class="gt_row gt_right">0.739</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">285</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">261</td>
      <td class="gt_row gt_right">0.916</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2014</td>
      <td class="gt_row gt_right">491</td>
      <td class="gt_row gt_right">1.881</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2015</td>
      <td class="gt_row gt_right">138</td>
      <td class="gt_row gt_right">0.281</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2016</td>
      <td class="gt_row gt_right">485</td>
      <td class="gt_row gt_right">3.514</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2017</td>
      <td class="gt_row gt_right">403</td>
      <td class="gt_row gt_right">0.831</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_left">2018</td>
      <td class="gt_row gt_right">436</td>
      <td class="gt_row gt_right">1.082</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B22111559</td>
      <td class="gt_row gt_left">2012</td>
      <td class="gt_row gt_right">1377</td>
      <td class="gt_row gt_right">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B22111559</td>
      <td class="gt_row gt_left">2013</td>
      <td class="gt_row gt_right">188</td>
      <td class="gt_row gt_right">0.137</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="前年度比算出の手順" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> 前年度比算出の手順</h3>
<ul>
<li><ol style="list-style-type: decimal">
<li>long_empを企業コードとyearでソートする</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>group_byと<strong>lag</strong>関数で企業コードごとの前年従業員数カラムを作る</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>mutateと<strong>if_else</strong>関数で従業員数伸び率カラムを作る</li>
</ol>
<ul>
<li>分子が0以下または分母が0以下のときはNAで返す</li>
<li>上記以外は従業員数÷前年従業員数を返す</li>
</ul></li>
<li><ol start="4" style="list-style-type: decimal">
<li>見栄えを整える</li>
</ol></li>
</ul>
<p>従業員数に注目したタテ持ちデータのlong_emp_lをlong_empとして使用します。</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="book_04_intermediate_2nd_half.html#cb371-1"></a>long_emp &lt;-<span class="st"> </span>long_emp_l</span></code></pre></div>
</div>
<div id="tejun_sort" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> 手順１：データのソート</h3>
<ul>
<li>前年比算出準備として企業コードとyearでソートします</li>
<li>ソートすることでカラム間の差分が計算できるからです</li>
</ul>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="book_04_intermediate_2nd_half.html#cb372-1"></a>long_emp &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-2"><a href="book_04_intermediate_2nd_half.html#cb372-2"></a><span class="st">  </span><span class="kw">arrange</span>(企業コード, year)</span>
<span id="cb372-3"><a href="book_04_intermediate_2nd_half.html#cb372-3"></a>long_emp</span></code></pre></div>
<pre><code># A tibble: 12,516 x 3
   企業コード year  従業員数
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;
 1 B02111302  2012      1254
 2 B02111302  2013       768
 3 B02111302  2014      1242
 4 B02111302  2015      1409
 5 B02111302  2016       728
 6 B02111302  2017      1401
 7 B02111302  2018      1096
 8 B02117802  2012        82
 9 B02117802  2013       376
10 B02117802  2014       374
# ... with 12,506 more rows</code></pre>
</div>
<div id="tejun_zennenjuu" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> 手順２：前年従業員数の作成</h3>
<ul>
<li>企業コードごとに前年従業員数カラムを作成します</li>
<li>lag関数は指定したベクトルを前にnずらす関数です</li>
</ul>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="book_04_intermediate_2nd_half.html#cb374-1"></a>long_emp &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span></span>
<span id="cb374-2"><a href="book_04_intermediate_2nd_half.html#cb374-2"></a><span class="st">  </span><span class="kw">group_by</span>(企業コード) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-3"><a href="book_04_intermediate_2nd_half.html#cb374-3"></a><span class="st">  </span><span class="kw">mutate</span>(前年従業員数 =<span class="st"> </span><span class="kw">lag</span>(従業員数, <span class="dt">n =</span> <span class="dv">1</span>))</span>
<span id="cb374-4"><a href="book_04_intermediate_2nd_half.html#cb374-4"></a>long_emp</span></code></pre></div>
<pre><code># A tibble: 12,516 x 4
# Groups:   企業コード [1,788]
   企業コード year  従業員数 前年従業員数
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;
 1 B02111302  2012      1254           NA
 2 B02111302  2013       768         1254
 3 B02111302  2014      1242          768
 4 B02111302  2015      1409         1242
 5 B02111302  2016       728         1409
 6 B02111302  2017      1401          728
 7 B02111302  2018      1096         1401
 8 B02117802  2012        82           NA
 9 B02117802  2013       376           82
10 B02117802  2014       374          376
# ... with 12,506 more rows</code></pre>
</div>
<div id="tejun_zennenhi" class="section level3" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> 手順３：前年度比算出</h3>
<ul>
<li>従業員数伸び率カラムを作成します</li>
</ul>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="book_04_intermediate_2nd_half.html#cb376-1"></a>long_emp &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb376-2"><a href="book_04_intermediate_2nd_half.html#cb376-2"></a><span class="st">  </span><span class="kw">mutate</span>(従業員数伸び率 =</span>
<span id="cb376-3"><a href="book_04_intermediate_2nd_half.html#cb376-3"></a><span class="st">      </span><span class="kw">if_else</span>(前年従業員数 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>従業員数 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb376-4"><a href="book_04_intermediate_2nd_half.html#cb376-4"></a>              <span class="kw">as.double</span>(<span class="ot">NA</span>), 従業員数 <span class="op">/</span><span class="st"> </span>前年従業員数))</span>
<span id="cb376-5"><a href="book_04_intermediate_2nd_half.html#cb376-5"></a>long_emp</span></code></pre></div>
<pre><code># A tibble: 12,516 x 5
# Groups:   企業コード [1,788]
   企業コード year  従業員数 前年従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2012      1254           NA         NA    
 2 B02111302  2013       768         1254          0.612
 3 B02111302  2014      1242          768          1.62 
 4 B02111302  2015      1409         1242          1.13 
 5 B02111302  2016       728         1409          0.517
 6 B02111302  2017      1401          728          1.92 
 7 B02111302  2018      1096         1401          0.782
 8 B02117802  2012        82           NA         NA    
 9 B02117802  2013       376           82          4.59 
10 B02117802  2014       374          376          0.995
# ... with 12,506 more rows</code></pre>
</div>
<div id="tejun_mibae" class="section level3" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> 手順４：見栄えを整える</h3>
<ul>
<li>従業員数伸び率を小数点以下3桁にまるめ、中間変数である前年従業員数を消去します</li>
</ul>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="book_04_intermediate_2nd_half.html#cb378-1"></a>long_emp &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb378-2"><a href="book_04_intermediate_2nd_half.html#cb378-2"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># group化はもう不要なのでgroupを解除します</span></span>
<span id="cb378-3"><a href="book_04_intermediate_2nd_half.html#cb378-3"></a><span class="st">  </span><span class="kw">mutate</span>(従業員数伸び率 =<span class="st"> </span><span class="kw">round</span>(従業員数伸び率, <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb378-4"><a href="book_04_intermediate_2nd_half.html#cb378-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>前年従業員数) </span>
<span id="cb378-5"><a href="book_04_intermediate_2nd_half.html#cb378-5"></a>long_emp</span></code></pre></div>
<pre><code># A tibble: 12,516 x 4
   企業コード year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2012      1254         NA    
 2 B02111302  2013       768          0.612
 3 B02111302  2014      1242          1.62 
 4 B02111302  2015      1409          1.13 
 5 B02111302  2016       728          0.517
 6 B02111302  2017      1401          1.92 
 7 B02111302  2018      1096          0.782
 8 B02117802  2012        82         NA    
 9 B02117802  2013       376          4.58 
10 B02117802  2014       374          0.995
# ... with 12,506 more rows</code></pre>
</div>
<div id="hi_matome" class="section level3" number="5.4.7">
<h3><span class="header-section-number">5.4.7</span> 前年度比算出まとめ</h3>
<ul>
<li>スライドの都合上、逐一代入をしましたが、最終的には以下のようにパイプを繋げて書きましょう</li>
<li>これ以上パイプが長くなるようなときは、適宜中間変数などを作成しましょう</li>
</ul>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="book_04_intermediate_2nd_half.html#cb380-1"></a>long_emp &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span></span>
<span id="cb380-2"><a href="book_04_intermediate_2nd_half.html#cb380-2"></a><span class="st">  </span><span class="kw">arrange</span>(企業コード, year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-3"><a href="book_04_intermediate_2nd_half.html#cb380-3"></a><span class="st">  </span><span class="kw">group_by</span>(企業コード) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-4"><a href="book_04_intermediate_2nd_half.html#cb380-4"></a><span class="st">  </span><span class="kw">mutate</span>(前年従業員数 =<span class="st"> </span><span class="kw">lag</span>(従業員数, <span class="dt">n =</span> <span class="dv">1</span>)) <span class="op">%&gt;%</span></span>
<span id="cb380-5"><a href="book_04_intermediate_2nd_half.html#cb380-5"></a><span class="st">  </span><span class="kw">mutate</span>(従業員数伸び率 =</span>
<span id="cb380-6"><a href="book_04_intermediate_2nd_half.html#cb380-6"></a><span class="st">      </span><span class="kw">if_else</span>(前年従業員数 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>従業員数 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb380-7"><a href="book_04_intermediate_2nd_half.html#cb380-7"></a>             <span class="kw">as.double</span>(<span class="ot">NA</span>), 従業員数 <span class="op">/</span><span class="st"> </span>前年従業員数)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-8"><a href="book_04_intermediate_2nd_half.html#cb380-8"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-9"><a href="book_04_intermediate_2nd_half.html#cb380-9"></a><span class="st">  </span><span class="kw">mutate</span>(従業員数伸び率 =<span class="st"> </span><span class="kw">round</span>(従業員数伸び率, <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-10"><a href="book_04_intermediate_2nd_half.html#cb380-10"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>前年従業員数) </span></code></pre></div>
</div>
<div id="zennenhi_sanko" class="section level3" number="5.4.8">
<h3><span class="header-section-number">5.4.8</span> 参考：横持ちで表示</h3>
<ul>
<li>従業員数伸び率をタテ持ちデータで算出しました。これは以下のようにしてヨコ持ちデータに変換できます</li>
</ul>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="book_04_intermediate_2nd_half.html#cb381-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>従業員数) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb381-2"><a href="book_04_intermediate_2nd_half.html#cb381-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year,</span>
<span id="cb381-3"><a href="book_04_intermediate_2nd_half.html#cb381-3"></a>              <span class="dt">values_from =</span> 従業員数伸び率,</span>
<span id="cb381-4"><a href="book_04_intermediate_2nd_half.html#cb381-4"></a>              <span class="dt">names_prefix =</span> <span class="st">&quot;従業員数_伸び率&quot;</span>)</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#adyfddppnc .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 20px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adyfddppnc .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adyfddppnc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#adyfddppnc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#adyfddppnc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adyfddppnc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adyfddppnc .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 22px;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adyfddppnc .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 22px;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adyfddppnc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adyfddppnc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adyfddppnc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adyfddppnc .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#adyfddppnc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adyfddppnc .gt_from_md > :first-child {
  margin-top: 0;
}

#adyfddppnc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adyfddppnc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adyfddppnc .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#adyfddppnc .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adyfddppnc .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#adyfddppnc .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adyfddppnc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adyfddppnc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adyfddppnc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adyfddppnc .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adyfddppnc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#adyfddppnc .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adyfddppnc .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#adyfddppnc .gt_left {
  text-align: left;
}

#adyfddppnc .gt_center {
  text-align: center;
}

#adyfddppnc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adyfddppnc .gt_font_normal {
  font-weight: normal;
}

#adyfddppnc .gt_font_bold {
  font-weight: bold;
}

#adyfddppnc .gt_font_italic {
  font-style: italic;
}

#adyfddppnc .gt_super {
  font-size: 65%;
}

#adyfddppnc .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="adyfddppnc" style="overflow-x:auto;overflow-y:auto;width:auto;height:270px;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">企業コード</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2012</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2013</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2014</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2015</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2016</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2017</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">従業員数伸び率_2018</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">B02111302</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.612</td>
      <td class="gt_row gt_right">1.617</td>
      <td class="gt_row gt_right">1.134</td>
      <td class="gt_row gt_right">0.517</td>
      <td class="gt_row gt_right">1.924</td>
      <td class="gt_row gt_right">0.782</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02117802</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">4.585</td>
      <td class="gt_row gt_right">0.995</td>
      <td class="gt_row gt_right">0.786</td>
      <td class="gt_row gt_right">1.435</td>
      <td class="gt_row gt_right">0.552</td>
      <td class="gt_row gt_right">0.742</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122250</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.873</td>
      <td class="gt_row gt_right">1.557</td>
      <td class="gt_row gt_right">1.046</td>
      <td class="gt_row gt_right">0.264</td>
      <td class="gt_row gt_right">1.761</td>
      <td class="gt_row gt_right">1.329</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02122602</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.182</td>
      <td class="gt_row gt_right">1.445</td>
      <td class="gt_row gt_right">0.117</td>
      <td class="gt_row gt_right">23.962</td>
      <td class="gt_row gt_right">0.445</td>
      <td class="gt_row gt_right">1.652</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02125529</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.928</td>
      <td class="gt_row gt_right">0.496</td>
      <td class="gt_row gt_right">1.071</td>
      <td class="gt_row gt_right">1.508</td>
      <td class="gt_row gt_right">1.028</td>
      <td class="gt_row gt_right">1.087</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02128716</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.936</td>
      <td class="gt_row gt_right">0.150</td>
      <td class="gt_row gt_right">9.548</td>
      <td class="gt_row gt_right">0.815</td>
      <td class="gt_row gt_right">0.798</td>
      <td class="gt_row gt_right">1.441</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02129789</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.496</td>
      <td class="gt_row gt_right">0.874</td>
      <td class="gt_row gt_right">0.884</td>
      <td class="gt_row gt_right">1.383</td>
      <td class="gt_row gt_right">0.591</td>
      <td class="gt_row gt_right">1.529</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02153443</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.716</td>
      <td class="gt_row gt_right">1.475</td>
      <td class="gt_row gt_right">1.456</td>
      <td class="gt_row gt_right">0.548</td>
      <td class="gt_row gt_right">1.098</td>
      <td class="gt_row gt_right">1.405</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02505784</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.871</td>
      <td class="gt_row gt_right">1.557</td>
      <td class="gt_row gt_right">0.688</td>
      <td class="gt_row gt_right">0.731</td>
      <td class="gt_row gt_right">1.811</td>
      <td class="gt_row gt_right">0.807</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B02514384</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">8.889</td>
      <td class="gt_row gt_right">0.506</td>
      <td class="gt_row gt_right">3.901</td>
      <td class="gt_row gt_right">0.753</td>
      <td class="gt_row gt_right">0.647</td>
      <td class="gt_row gt_right">2.104</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12083033</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.638</td>
      <td class="gt_row gt_right">0.757</td>
      <td class="gt_row gt_right">1.000</td>
      <td class="gt_row gt_right">1.670</td>
      <td class="gt_row gt_right">0.279</td>
      <td class="gt_row gt_right">3.617</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12117505</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.579</td>
      <td class="gt_row gt_right">0.621</td>
      <td class="gt_row gt_right">1.149</td>
      <td class="gt_row gt_right">0.446</td>
      <td class="gt_row gt_right">0.150</td>
      <td class="gt_row gt_right">3.904</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12121772</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.947</td>
      <td class="gt_row gt_right">0.794</td>
      <td class="gt_row gt_right">0.656</td>
      <td class="gt_row gt_right">1.716</td>
      <td class="gt_row gt_right">0.851</td>
      <td class="gt_row gt_right">0.739</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B12127908</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.916</td>
      <td class="gt_row gt_right">1.881</td>
      <td class="gt_row gt_right">0.281</td>
      <td class="gt_row gt_right">3.514</td>
      <td class="gt_row gt_right">0.831</td>
      <td class="gt_row gt_right">1.082</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B22111559</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.137</td>
      <td class="gt_row gt_right">11.479</td>
      <td class="gt_row gt_right">0.648</td>
      <td class="gt_row gt_right">0.386</td>
      <td class="gt_row gt_right">1.796</td>
      <td class="gt_row gt_right">1.769</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B22118371</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.756</td>
      <td class="gt_row gt_right">0.528</td>
      <td class="gt_row gt_right">0.301</td>
      <td class="gt_row gt_right">3.082</td>
      <td class="gt_row gt_right">2.172</td>
      <td class="gt_row gt_right">0.018</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42105710</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.716</td>
      <td class="gt_row gt_right">0.935</td>
      <td class="gt_row gt_right">0.556</td>
      <td class="gt_row gt_right">0.540</td>
      <td class="gt_row gt_right">4.047</td>
      <td class="gt_row gt_right">1.102</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42112673</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.464</td>
      <td class="gt_row gt_right">1.636</td>
      <td class="gt_row gt_right">3.261</td>
      <td class="gt_row gt_right">0.411</td>
      <td class="gt_row gt_right">1.139</td>
      <td class="gt_row gt_right">0.620</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42113715</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.974</td>
      <td class="gt_row gt_right">0.755</td>
      <td class="gt_row gt_right">1.742</td>
      <td class="gt_row gt_right">0.273</td>
      <td class="gt_row gt_right">3.379</td>
      <td class="gt_row gt_right">0.991</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42116333</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.188</td>
      <td class="gt_row gt_right">3.293</td>
      <td class="gt_row gt_right">0.627</td>
      <td class="gt_row gt_right">0.621</td>
      <td class="gt_row gt_right">3.732</td>
      <td class="gt_row gt_right">0.977</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42119099</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.754</td>
      <td class="gt_row gt_right">0.708</td>
      <td class="gt_row gt_right">1.032</td>
      <td class="gt_row gt_right">2.212</td>
      <td class="gt_row gt_right">0.403</td>
      <td class="gt_row gt_right">1.345</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42120113</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.771</td>
      <td class="gt_row gt_right">0.748</td>
      <td class="gt_row gt_right">1.522</td>
      <td class="gt_row gt_right">0.469</td>
      <td class="gt_row gt_right">0.089</td>
      <td class="gt_row gt_right">17.400</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42124422</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.951</td>
      <td class="gt_row gt_right">1.604</td>
      <td class="gt_row gt_right">0.803</td>
      <td class="gt_row gt_right">1.646</td>
      <td class="gt_row gt_right">0.415</td>
      <td class="gt_row gt_right">1.327</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42125462</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">2.710</td>
      <td class="gt_row gt_right">1.865</td>
      <td class="gt_row gt_right">1.347</td>
      <td class="gt_row gt_right">0.525</td>
      <td class="gt_row gt_right">1.449</td>
      <td class="gt_row gt_right">0.702</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42126156</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.873</td>
      <td class="gt_row gt_right">0.785</td>
      <td class="gt_row gt_right">0.388</td>
      <td class="gt_row gt_right">2.503</td>
      <td class="gt_row gt_right">0.557</td>
      <td class="gt_row gt_right">0.981</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42126640</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.579</td>
      <td class="gt_row gt_right">1.864</td>
      <td class="gt_row gt_right">0.856</td>
      <td class="gt_row gt_right">0.089</td>
      <td class="gt_row gt_right">9.062</td>
      <td class="gt_row gt_right">0.743</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42152322</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.106</td>
      <td class="gt_row gt_right">0.889</td>
      <td class="gt_row gt_right">1.499</td>
      <td class="gt_row gt_right">0.302</td>
      <td class="gt_row gt_right">1.354</td>
      <td class="gt_row gt_right">2.713</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42193155</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">39.812</td>
      <td class="gt_row gt_right">1.527</td>
      <td class="gt_row gt_right">0.825</td>
      <td class="gt_row gt_right">1.014</td>
      <td class="gt_row gt_right">1.009</td>
      <td class="gt_row gt_right">0.752</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42504542</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.260</td>
      <td class="gt_row gt_right">0.561</td>
      <td class="gt_row gt_right">0.982</td>
      <td class="gt_row gt_right">1.106</td>
      <td class="gt_row gt_right">1.200</td>
      <td class="gt_row gt_right">0.447</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42539783</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.701</td>
      <td class="gt_row gt_right">0.935</td>
      <td class="gt_row gt_right">0.679</td>
      <td class="gt_row gt_right">2.112</td>
      <td class="gt_row gt_right">0.430</td>
      <td class="gt_row gt_right">0.127</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42588245</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.725</td>
      <td class="gt_row gt_right">0.567</td>
      <td class="gt_row gt_right">0.537</td>
      <td class="gt_row gt_right">2.579</td>
      <td class="gt_row gt_right">0.736</td>
      <td class="gt_row gt_right">1.546</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42597519</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">2.696</td>
      <td class="gt_row gt_right">0.555</td>
      <td class="gt_row gt_right">1.576</td>
      <td class="gt_row gt_right">0.204</td>
      <td class="gt_row gt_right">4.103</td>
      <td class="gt_row gt_right">1.207</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B42633350</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.445</td>
      <td class="gt_row gt_right">1.903</td>
      <td class="gt_row gt_right">0.797</td>
      <td class="gt_row gt_right">1.358</td>
      <td class="gt_row gt_right">0.797</td>
      <td class="gt_row gt_right">0.307</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B52112726</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.198</td>
      <td class="gt_row gt_right">9.000</td>
      <td class="gt_row gt_right">0.543</td>
      <td class="gt_row gt_right">1.146</td>
      <td class="gt_row gt_right">1.590</td>
      <td class="gt_row gt_right">0.443</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B52119466</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.733</td>
      <td class="gt_row gt_right">2.052</td>
      <td class="gt_row gt_right">0.919</td>
      <td class="gt_row gt_right">0.320</td>
      <td class="gt_row gt_right">2.415</td>
      <td class="gt_row gt_right">0.911</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B58115159</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.782</td>
      <td class="gt_row gt_right">0.529</td>
      <td class="gt_row gt_right">2.206</td>
      <td class="gt_row gt_right">0.466</td>
      <td class="gt_row gt_right">1.061</td>
      <td class="gt_row gt_right">1.566</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B82147010</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.701</td>
      <td class="gt_row gt_right">0.768</td>
      <td class="gt_row gt_right">1.102</td>
      <td class="gt_row gt_right">1.058</td>
      <td class="gt_row gt_right">2.050</td>
      <td class="gt_row gt_right">0.631</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B92111476</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.156</td>
      <td class="gt_row gt_right">1.445</td>
      <td class="gt_row gt_right">0.179</td>
      <td class="gt_row gt_right">5.001</td>
      <td class="gt_row gt_right">0.166</td>
      <td class="gt_row gt_right">3.004</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B92111910</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.097</td>
      <td class="gt_row gt_right">0.302</td>
      <td class="gt_row gt_right">2.273</td>
      <td class="gt_row gt_right">1.028</td>
      <td class="gt_row gt_right">0.992</td>
      <td class="gt_row gt_right">0.795</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B92122805</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.634</td>
      <td class="gt_row gt_right">0.437</td>
      <td class="gt_row gt_right">2.889</td>
      <td class="gt_row gt_right">0.437</td>
      <td class="gt_row gt_right">1.963</td>
      <td class="gt_row gt_right">0.017</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B92159680</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.805</td>
      <td class="gt_row gt_right">0.533</td>
      <td class="gt_row gt_right">4.522</td>
      <td class="gt_row gt_right">0.135</td>
      <td class="gt_row gt_right">1.273</td>
      <td class="gt_row gt_right">2.629</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">B92598280</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.419</td>
      <td class="gt_row gt_right">3.651</td>
      <td class="gt_row gt_right">0.767</td>
      <td class="gt_row gt_right">0.292</td>
      <td class="gt_row gt_right">4.478</td>
      <td class="gt_row gt_right">0.751</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C02122267</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.619</td>
      <td class="gt_row gt_right">1.050</td>
      <td class="gt_row gt_right">0.983</td>
      <td class="gt_row gt_right">0.724</td>
      <td class="gt_row gt_right">1.209</td>
      <td class="gt_row gt_right">0.987</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C02128399</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.502</td>
      <td class="gt_row gt_right">0.030</td>
      <td class="gt_row gt_right">36.333</td>
      <td class="gt_row gt_right">0.913</td>
      <td class="gt_row gt_right">0.767</td>
      <td class="gt_row gt_right">0.881</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C02137964</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">3.113</td>
      <td class="gt_row gt_right">0.588</td>
      <td class="gt_row gt_right">0.680</td>
      <td class="gt_row gt_right">0.858</td>
      <td class="gt_row gt_right">1.802</td>
      <td class="gt_row gt_right">0.342</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C02522283</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.166</td>
      <td class="gt_row gt_right">1.290</td>
      <td class="gt_row gt_right">0.381</td>
      <td class="gt_row gt_right">1.133</td>
      <td class="gt_row gt_right">1.638</td>
      <td class="gt_row gt_right">0.883</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C12118341</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.396</td>
      <td class="gt_row gt_right">0.334</td>
      <td class="gt_row gt_right">0.160</td>
      <td class="gt_row gt_right">11.147</td>
      <td class="gt_row gt_right">0.786</td>
      <td class="gt_row gt_right">2.007</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C12582479</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.667</td>
      <td class="gt_row gt_right">1.291</td>
      <td class="gt_row gt_right">1.424</td>
      <td class="gt_row gt_right">1.160</td>
      <td class="gt_row gt_right">1.224</td>
      <td class="gt_row gt_right">0.072</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C22116979</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.356</td>
      <td class="gt_row gt_right">1.675</td>
      <td class="gt_row gt_right">2.848</td>
      <td class="gt_row gt_right">0.763</td>
      <td class="gt_row gt_right">0.869</td>
      <td class="gt_row gt_right">1.405</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C22158694</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.990</td>
      <td class="gt_row gt_right">0.726</td>
      <td class="gt_row gt_right">0.214</td>
      <td class="gt_row gt_right">12.149</td>
      <td class="gt_row gt_right">0.380</td>
      <td class="gt_row gt_right">1.114</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C32114510</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.706</td>
      <td class="gt_row gt_right">0.440</td>
      <td class="gt_row gt_right">3.041</td>
      <td class="gt_row gt_right">0.375</td>
      <td class="gt_row gt_right">0.920</td>
      <td class="gt_row gt_right">2.372</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C32118312</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.766</td>
      <td class="gt_row gt_right">0.817</td>
      <td class="gt_row gt_right">4.179</td>
      <td class="gt_row gt_right">0.391</td>
      <td class="gt_row gt_right">0.927</td>
      <td class="gt_row gt_right">0.296</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C32618733</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.882</td>
      <td class="gt_row gt_right">0.948</td>
      <td class="gt_row gt_right">1.385</td>
      <td class="gt_row gt_right">0.872</td>
      <td class="gt_row gt_right">2.646</td>
      <td class="gt_row gt_right">0.267</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42103174</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">4.812</td>
      <td class="gt_row gt_right">0.107</td>
      <td class="gt_row gt_right">0.404</td>
      <td class="gt_row gt_right">31.952</td>
      <td class="gt_row gt_right">0.358</td>
      <td class="gt_row gt_right">0.912</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42110360</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.270</td>
      <td class="gt_row gt_right">0.473</td>
      <td class="gt_row gt_right">0.169</td>
      <td class="gt_row gt_right">7.533</td>
      <td class="gt_row gt_right">1.292</td>
      <td class="gt_row gt_right">1.021</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42112827</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.595</td>
      <td class="gt_row gt_right">3.546</td>
      <td class="gt_row gt_right">1.226</td>
      <td class="gt_row gt_right">0.239</td>
      <td class="gt_row gt_right">2.856</td>
      <td class="gt_row gt_right">1.369</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42125774</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.019</td>
      <td class="gt_row gt_right">0.744</td>
      <td class="gt_row gt_right">0.125</td>
      <td class="gt_row gt_right">6.950</td>
      <td class="gt_row gt_right">0.727</td>
      <td class="gt_row gt_right">1.218</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42142466</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.907</td>
      <td class="gt_row gt_right">0.850</td>
      <td class="gt_row gt_right">1.326</td>
      <td class="gt_row gt_right">0.392</td>
      <td class="gt_row gt_right">1.702</td>
      <td class="gt_row gt_right">1.387</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42142500</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.962</td>
      <td class="gt_row gt_right">0.710</td>
      <td class="gt_row gt_right">0.154</td>
      <td class="gt_row gt_right">18.017</td>
      <td class="gt_row gt_right">0.820</td>
      <td class="gt_row gt_right">0.720</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42151200</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.534</td>
      <td class="gt_row gt_right">0.831</td>
      <td class="gt_row gt_right">1.340</td>
      <td class="gt_row gt_right">0.866</td>
      <td class="gt_row gt_right">1.461</td>
      <td class="gt_row gt_right">0.713</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42151408</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.667</td>
      <td class="gt_row gt_right">0.774</td>
      <td class="gt_row gt_right">0.666</td>
      <td class="gt_row gt_right">1.058</td>
      <td class="gt_row gt_right">0.473</td>
      <td class="gt_row gt_right">1.583</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42151590</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.115</td>
      <td class="gt_row gt_right">1.099</td>
      <td class="gt_row gt_right">1.453</td>
      <td class="gt_row gt_right">0.514</td>
      <td class="gt_row gt_right">1.598</td>
      <td class="gt_row gt_right">0.705</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42159269</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.565</td>
      <td class="gt_row gt_right">1.355</td>
      <td class="gt_row gt_right">1.160</td>
      <td class="gt_row gt_right">0.799</td>
      <td class="gt_row gt_right">1.447</td>
      <td class="gt_row gt_right">1.000</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42166567</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.997</td>
      <td class="gt_row gt_right">1.116</td>
      <td class="gt_row gt_right">1.349</td>
      <td class="gt_row gt_right">0.649</td>
      <td class="gt_row gt_right">0.454</td>
      <td class="gt_row gt_right">3.488</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42175682</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.785</td>
      <td class="gt_row gt_right">1.123</td>
      <td class="gt_row gt_right">1.602</td>
      <td class="gt_row gt_right">0.541</td>
      <td class="gt_row gt_right">1.376</td>
      <td class="gt_row gt_right">1.652</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42516470</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.072</td>
      <td class="gt_row gt_right">0.558</td>
      <td class="gt_row gt_right">0.159</td>
      <td class="gt_row gt_right">31.459</td>
      <td class="gt_row gt_right">0.729</td>
      <td class="gt_row gt_right">1.383</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42516485</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.245</td>
      <td class="gt_row gt_right">1.135</td>
      <td class="gt_row gt_right">1.109</td>
      <td class="gt_row gt_right">0.013</td>
      <td class="gt_row gt_right">54.000</td>
      <td class="gt_row gt_right">1.049</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42538173</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.250</td>
      <td class="gt_row gt_right">5.857</td>
      <td class="gt_row gt_right">0.463</td>
      <td class="gt_row gt_right">1.974</td>
      <td class="gt_row gt_right">1.213</td>
      <td class="gt_row gt_right">0.484</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42564567</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.230</td>
      <td class="gt_row gt_right">0.633</td>
      <td class="gt_row gt_right">1.669</td>
      <td class="gt_row gt_right">0.660</td>
      <td class="gt_row gt_right">1.494</td>
      <td class="gt_row gt_right">0.507</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42616089</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">14.617</td>
      <td class="gt_row gt_right">0.766</td>
      <td class="gt_row gt_right">1.423</td>
      <td class="gt_row gt_right">0.381</td>
      <td class="gt_row gt_right">3.897</td>
      <td class="gt_row gt_right">1.046</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42657447</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.673</td>
      <td class="gt_row gt_right">0.876</td>
      <td class="gt_row gt_right">1.475</td>
      <td class="gt_row gt_right">0.831</td>
      <td class="gt_row gt_right">1.309</td>
      <td class="gt_row gt_right">1.819</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C42833600</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.938</td>
      <td class="gt_row gt_right">0.042</td>
      <td class="gt_row gt_right">5.800</td>
      <td class="gt_row gt_right">1.172</td>
      <td class="gt_row gt_right">2.794</td>
      <td class="gt_row gt_right">0.863</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C52143315</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.976</td>
      <td class="gt_row gt_right">1.520</td>
      <td class="gt_row gt_right">0.824</td>
      <td class="gt_row gt_right">1.090</td>
      <td class="gt_row gt_right">1.075</td>
      <td class="gt_row gt_right">1.182</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C52174709</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.487</td>
      <td class="gt_row gt_right">0.608</td>
      <td class="gt_row gt_right">2.444</td>
      <td class="gt_row gt_right">0.264</td>
      <td class="gt_row gt_right">2.828</td>
      <td class="gt_row gt_right">2.207</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C62163186</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.549</td>
      <td class="gt_row gt_right">1.139</td>
      <td class="gt_row gt_right">1.417</td>
      <td class="gt_row gt_right">0.697</td>
      <td class="gt_row gt_right">0.180</td>
      <td class="gt_row gt_right">4.863</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C62177407</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.425</td>
      <td class="gt_row gt_right">1.028</td>
      <td class="gt_row gt_right">0.737</td>
      <td class="gt_row gt_right">1.511</td>
      <td class="gt_row gt_right">1.554</td>
      <td class="gt_row gt_right">0.823</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C62547310</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.390</td>
      <td class="gt_row gt_right">1.274</td>
      <td class="gt_row gt_right">0.994</td>
      <td class="gt_row gt_right">2.115</td>
      <td class="gt_row gt_right">0.094</td>
      <td class="gt_row gt_right">0.381</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C72119562</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.976</td>
      <td class="gt_row gt_right">1.847</td>
      <td class="gt_row gt_right">0.628</td>
      <td class="gt_row gt_right">1.425</td>
      <td class="gt_row gt_right">0.490</td>
      <td class="gt_row gt_right">0.548</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C72124439</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.802</td>
      <td class="gt_row gt_right">1.072</td>
      <td class="gt_row gt_right">1.807</td>
      <td class="gt_row gt_right">0.486</td>
      <td class="gt_row gt_right">2.172</td>
      <td class="gt_row gt_right">0.787</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C82108010</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.226</td>
      <td class="gt_row gt_right">1.095</td>
      <td class="gt_row gt_right">0.416</td>
      <td class="gt_row gt_right">1.984</td>
      <td class="gt_row gt_right">0.819</td>
      <td class="gt_row gt_right">1.118</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C82126227</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.665</td>
      <td class="gt_row gt_right">0.959</td>
      <td class="gt_row gt_right">1.702</td>
      <td class="gt_row gt_right">0.609</td>
      <td class="gt_row gt_right">0.861</td>
      <td class="gt_row gt_right">0.830</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C82153425</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.511</td>
      <td class="gt_row gt_right">2.577</td>
      <td class="gt_row gt_right">0.270</td>
      <td class="gt_row gt_right">4.154</td>
      <td class="gt_row gt_right">0.367</td>
      <td class="gt_row gt_right">1.941</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92113550</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">2.162</td>
      <td class="gt_row gt_right">2.381</td>
      <td class="gt_row gt_right">0.438</td>
      <td class="gt_row gt_right">1.113</td>
      <td class="gt_row gt_right">0.871</td>
      <td class="gt_row gt_right">0.968</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92114080</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.425</td>
      <td class="gt_row gt_right">0.829</td>
      <td class="gt_row gt_right">0.615</td>
      <td class="gt_row gt_right">2.079</td>
      <td class="gt_row gt_right">2.070</td>
      <td class="gt_row gt_right">2.066</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92114146</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.046</td>
      <td class="gt_row gt_right">27.127</td>
      <td class="gt_row gt_right">0.733</td>
      <td class="gt_row gt_right">1.013</td>
      <td class="gt_row gt_right">1.172</td>
      <td class="gt_row gt_right">0.656</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92114618</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.943</td>
      <td class="gt_row gt_right">0.774</td>
      <td class="gt_row gt_right">0.117</td>
      <td class="gt_row gt_right">8.789</td>
      <td class="gt_row gt_right">0.611</td>
      <td class="gt_row gt_right">1.029</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92119360</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.135</td>
      <td class="gt_row gt_right">0.402</td>
      <td class="gt_row gt_right">1.993</td>
      <td class="gt_row gt_right">2.250</td>
      <td class="gt_row gt_right">0.550</td>
      <td class="gt_row gt_right">1.602</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92119431</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.327</td>
      <td class="gt_row gt_right">1.000</td>
      <td class="gt_row gt_right">0.679</td>
      <td class="gt_row gt_right">1.145</td>
      <td class="gt_row gt_right">0.966</td>
      <td class="gt_row gt_right">2.167</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92119510</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.784</td>
      <td class="gt_row gt_right">1.296</td>
      <td class="gt_row gt_right">2.494</td>
      <td class="gt_row gt_right">0.710</td>
      <td class="gt_row gt_right">0.035</td>
      <td class="gt_row gt_right">37.467</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92123466</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.572</td>
      <td class="gt_row gt_right">1.990</td>
      <td class="gt_row gt_right">1.256</td>
      <td class="gt_row gt_right">0.957</td>
      <td class="gt_row gt_right">0.791</td>
      <td class="gt_row gt_right">0.749</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92180151</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.176</td>
      <td class="gt_row gt_right">1.534</td>
      <td class="gt_row gt_right">0.625</td>
      <td class="gt_row gt_right">4.521</td>
      <td class="gt_row gt_right">0.139</td>
      <td class="gt_row gt_right">6.639</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92541519</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.948</td>
      <td class="gt_row gt_right">1.923</td>
      <td class="gt_row gt_right">1.102</td>
      <td class="gt_row gt_right">0.656</td>
      <td class="gt_row gt_right">1.309</td>
      <td class="gt_row gt_right">0.684</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92544080</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.849</td>
      <td class="gt_row gt_right">0.379</td>
      <td class="gt_row gt_right">2.763</td>
      <td class="gt_row gt_right">0.501</td>
      <td class="gt_row gt_right">1.349</td>
      <td class="gt_row gt_right">0.852</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92544094</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.310</td>
      <td class="gt_row gt_right">0.654</td>
      <td class="gt_row gt_right">1.802</td>
      <td class="gt_row gt_right">0.199</td>
      <td class="gt_row gt_right">0.042</td>
      <td class="gt_row gt_right">121.750</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92553123</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.910</td>
      <td class="gt_row gt_right">1.075</td>
      <td class="gt_row gt_right">0.394</td>
      <td class="gt_row gt_right">1.035</td>
      <td class="gt_row gt_right">0.678</td>
      <td class="gt_row gt_right">1.192</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">C92726995</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">10.178</td>
      <td class="gt_row gt_right">0.948</td>
      <td class="gt_row gt_right">1.276</td>
      <td class="gt_row gt_right">0.617</td>
      <td class="gt_row gt_right">1.658</td>
      <td class="gt_row gt_right">0.848</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">D02116397</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">0.417</td>
      <td class="gt_row gt_right">2.077</td>
      <td class="gt_row gt_right">1.174</td>
      <td class="gt_row gt_right">1.535</td>
      <td class="gt_row gt_right">0.447</td>
      <td class="gt_row gt_right">1.236</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">D02122956</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">1.538</td>
      <td class="gt_row gt_right">0.053</td>
      <td class="gt_row gt_right">11.786</td>
      <td class="gt_row gt_right">0.155</td>
      <td class="gt_row gt_right">8.608</td>
      <td class="gt_row gt_right">0.936</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">D02125964</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">3.619</td>
      <td class="gt_row gt_right">0.886</td>
      <td class="gt_row gt_right">1.215</td>
      <td class="gt_row gt_right">0.568</td>
      <td class="gt_row gt_right">0.796</td>
      <td class="gt_row gt_right">1.560</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">D02141047</td>
      <td class="gt_row gt_right">NA</td>
      <td class="gt_row gt_right">2.521</td>
      <td class="gt_row gt_right">0.764</td>
      <td class="gt_row gt_right">1.299</td>
      <td class="gt_row gt_right">0.650</td>
      <td class="gt_row gt_right">1.294</td>
      <td class="gt_row gt_right">1.063</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
<div id="データの可視化" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> データの可視化</h2>
<ul>
<li>データの理解を深めるために必須のスキルです</li>
<li>ggplot2の基礎を習得します</li>
</ul>
<div id="なぜデータを可視化するのか" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> なぜデータを可視化するのか</h3>
<ul>
<li>要約統計量のみではデータの理解が困難だからです</li>
<li>データ研磨においても、データ分析においても、データを可視化しながら作業を進めるのが一般的です</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<p>long_emp</p>
<pre><code># A tibble: 12,516 x 4
   企業コード year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2012      1254         NA    
 2 B02111302  2013       768          0.612
 3 B02111302  2014      1242          1.62 
 4 B02111302  2015      1409          1.13 
 5 B02111302  2016       728          0.517
 6 B02111302  2017      1401          1.92 
 7 B02111302  2018      1096          0.782
 8 B02117802  2012        82         NA    
 9 B02117802  2013       376          4.58 
10 B02117802  2014       374          0.995
# ... with 12,506 more rows</code></pre>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<pre><code>    従業員数       従業員数伸び率   
 Min.   :    1.0   Min.   :  0.001  
 1st Qu.:  306.8   1st Qu.:  0.615  
 Median :  668.5   Median :  1.016  
 Mean   : 1821.8   Mean   :  2.544  
 3rd Qu.: 1488.8   3rd Qu.:  1.607  
 Max.   :90164.0   Max.   :358.000  
                   NA&#39;s   :1        </code></pre>
<p><img src="data_engineering_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="どうやって可視化するのか" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> どうやって可視化するのか</h3>
<ul>
<li><p>データの可視化には<strong>ggplot2</strong>を使用します</p></li>
<li><p>ggplot2はtidyverseに含まれているパッケージの1つです</p>
<ul>
<li>なぜggplot“2”なのかは気にしないでください</li>
</ul></li>
<li><p>可視化に使用するデータは<strong>必ずタテ持ちデータ</strong>です</p></li>
<li><p>またggplotはレイヤー(層)構造で設計されています</p></li>
<li><p>まずは次頁ですべてのレイヤーをまとめて確認した後に、個々のレイヤーを順番に確認していきます</p></li>
<li><p>ここではlong_empを可視化していきます</p></li>
</ul>
</div>
<div id="layer_str" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> ggplotのレイヤー構造</h3>
<table>
<thead>
<tr class="header">
<th align="center">レイヤー（関数）</th>
<th align="center">指定するもの</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">ggplot</td>
<td align="center">使用するデータ</td>
</tr>
<tr class="even">
<td align="center">aes</td>
<td align="center">x軸・y軸などの値やデータの色分けなど</td>
</tr>
<tr class="odd">
<td align="center">geom_*</td>
<td align="center">プロットの種類（geom_histogram, geom_pointなど）</td>
</tr>
<tr class="even">
<td align="center">labs</td>
<td align="center">軸名やタイトルなど</td>
</tr>
<tr class="odd">
<td align="center">facet</td>
<td align="center">データの比較分割</td>
</tr>
</tbody>
</table>
<div class="columns">
<div class="column" style="width:55%;">
<p>レイヤーは+で追加します</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="book_04_intermediate_2nd_half.html#cb384-1"></a><span class="kw">ggplot</span>(long_emp) <span class="op">+</span></span>
<span id="cb384-2"><a href="book_04_intermediate_2nd_half.html#cb384-2"></a><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率) <span class="op">+</span></span>
<span id="cb384-3"><a href="book_04_intermediate_2nd_half.html#cb384-3"></a><span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span></span>
<span id="cb384-4"><a href="book_04_intermediate_2nd_half.html#cb384-4"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb384-5"><a href="book_04_intermediate_2nd_half.html#cb384-5"></a>    <span class="dt">title =</span> <span class="st">&quot;年別の従業員数伸び率&quot;</span></span>
<span id="cb384-6"><a href="book_04_intermediate_2nd_half.html#cb384-6"></a>    ) <span class="op">+</span></span>
<span id="cb384-7"><a href="book_04_intermediate_2nd_half.html#cb384-7"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(year))</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><br></p>
<p><img src="data_engineering_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="dodai" class="section level3" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> <strong>ggplot</strong>：土台作成</h3>
<ul>
<li>この段階ではもちろん何の可視化もしていません</li>
<li>ggplot関数にはまず描画に使用するデータを指定します（tab補完が効くようになるのでパイプを推奨）</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="book_04_intermediate_2nd_half.html#cb385-1"></a><span class="kw">ggplot</span>()</span></code></pre></div>
<p><img src="data_engineering_files/figure-html/ggplot-1.png" width="672" /></p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="book_04_intermediate_2nd_half.html#cb386-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-2"><a href="book_04_intermediate_2nd_half.html#cb386-2"></a><span class="st">  </span><span class="kw">ggplot</span>()</span></code></pre></div>
<p><img src="data_engineering_files/figure-html/unnamed-chunk-99-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="aesデータの情報を指定" class="section level3" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> <strong>aes</strong>：データの情報を指定</h3>
<ul>
<li>aes関数で軸のデータを指定します</li>
<li>ggplot内に書くことを推奨します</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="book_04_intermediate_2nd_half.html#cb387-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb387-2"><a href="book_04_intermediate_2nd_half.html#cb387-2"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb387-3"><a href="book_04_intermediate_2nd_half.html#cb387-3"></a><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率)</span></code></pre></div>
<p><img src="data_engineering_files/figure-html/aes-1.png" width="672" /></p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="book_04_intermediate_2nd_half.html#cb388-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-2"><a href="book_04_intermediate_2nd_half.html#cb388-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率))</span></code></pre></div>
<p><img src="data_engineering_files/figure-html/unnamed-chunk-100-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="geom" class="section level3" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> <strong>geom_＊</strong>：描画</h3>
<ul>
<li>ヒストグラムならgeom_histogramを使います</li>
<li>他にも以下のようなプロットを書くことができます
<ul>
<li>geom_point：散布図</li>
<li>geom_boxplot：ボックスプロット</li>
<li>geom_line：折れ線グラフ</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="book_04_intermediate_2nd_half.html#cb389-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb389-2"><a href="book_04_intermediate_2nd_half.html#cb389-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率)) <span class="op">+</span></span>
<span id="cb389-3"><a href="book_04_intermediate_2nd_half.html#cb389-3"></a><span class="st">  </span><span class="kw">geom_histogram</span>()</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="labs軸名やタイトル" class="section level3" number="5.5.7">
<h3><span class="header-section-number">5.5.7</span> <strong>labs</strong>：軸名やタイトル</h3>
<ul>
<li>labsで指定できるのは以下のようなものです
<ul>
<li>x：x軸の名前</li>
<li>y：y軸の名前</li>
<li>title：タイトル</li>
<li>caption：キャプション</li>
</ul></li>
<li>軸名やタイトルを付けることは可視化のルールです</li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="book_04_intermediate_2nd_half.html#cb390-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb390-2"><a href="book_04_intermediate_2nd_half.html#cb390-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率)) <span class="op">+</span></span>
<span id="cb390-3"><a href="book_04_intermediate_2nd_half.html#cb390-3"></a><span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span></span>
<span id="cb390-4"><a href="book_04_intermediate_2nd_half.html#cb390-4"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb390-5"><a href="book_04_intermediate_2nd_half.html#cb390-5"></a>    <span class="dt">title =</span> <span class="st">&quot;従業員数伸び率のヒストグラム&quot;</span></span>
<span id="cb390-6"><a href="book_04_intermediate_2nd_half.html#cb390-6"></a>  )</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="before_facet" class="section level3" number="5.5.8">
<h3><span class="header-section-number">5.5.8</span> <strong>facet</strong>の前に</h3>
<ul>
<li>ここまで可視化してきたものは、2012年から2018年のデータを分け隔てなく一枚のプロットに描画していました</li>
<li>facetは年別などのグループ比較をするために使います</li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<p>long_emp</p>
<pre><code># A tibble: 12,516 x 4
   企業コード year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2012      1254         NA    
 2 B02111302  2013       768          0.612
 3 B02111302  2014      1242          1.62 
 4 B02111302  2015      1409          1.13 
 5 B02111302  2016       728          0.517
 6 B02111302  2017      1401          1.92 
 7 B02111302  2018      1096          0.782
 8 B02117802  2012        82         NA    
 9 B02117802  2013       376          4.58 
10 B02117802  2014       374          0.995
# ... with 12,506 more rows</code></pre>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<p><br></p>
<p><img src="data_engineering_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="facet" class="section level3" number="5.5.9">
<h3><span class="header-section-number">5.5.9</span> <strong>facet</strong>：グループ比較</h3>
<ul>
<li><strong>facet_wrap</strong>関数を使えばグループ比較ができます
<ul>
<li>グループ比較する変数を“vars(変数名)”の形で指定します</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="book_04_intermediate_2nd_half.html#cb392-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-2"><a href="book_04_intermediate_2nd_half.html#cb392-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率)) <span class="op">+</span></span>
<span id="cb392-3"><a href="book_04_intermediate_2nd_half.html#cb392-3"></a><span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span></span>
<span id="cb392-4"><a href="book_04_intermediate_2nd_half.html#cb392-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;年別での従業員数伸び率&quot;</span>) <span class="op">+</span></span>
<span id="cb392-5"><a href="book_04_intermediate_2nd_half.html#cb392-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(year))</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="可視化のススメ" class="section level3" number="5.5.10">
<h3><span class="header-section-number">5.5.10</span> 可視化のススメ</h3>
<ul>
<li>ggplot2による可視化の基礎は以上になります
<ul>
<li>ggplot2を使えば、こで紹介したもの以外にも多種多様なプロットをフレキシブルに作成することができます</li>
<li>データを可視化する力はデータ研磨力と並んでとても重要です</li>
<li>書籍で勉強したり、色々なデータで色々な可視化に挑戦することをお勧めします</li>
</ul></li>
<li>最後に、今回のlong_empの可視化についていくつか参考を載せておきます</li>
</ul>
</div>
<div id="kasika_sanko1" class="section level3" number="5.5.11">
<h3><span class="header-section-number">5.5.11</span> 参考１：データの整形</h3>
<ul>
<li>先ほどのヒストグラムを見ると、データに異常に大きな値が含まれていることがわかります</li>
<li>データ整形後に、パイプで一気にggplot関数にデータを入れることは往々にしてあります
<ul>
<li>従業員数伸び率が3%以下のデータのみとしました</li>
<li>2012年の従業員数伸び率は全てNAなのでなくなりました</li>
</ul></li>
<li>plotをオブジェクトに保存後のレイヤー追加もできます</li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="book_04_intermediate_2nd_half.html#cb393-1"></a>p &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-2"><a href="book_04_intermediate_2nd_half.html#cb393-2"></a><span class="st">  </span><span class="kw">filter</span>(従業員数伸び率 <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-3"><a href="book_04_intermediate_2nd_half.html#cb393-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率)) <span class="op">+</span></span>
<span id="cb393-4"><a href="book_04_intermediate_2nd_half.html#cb393-4"></a><span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span></span>
<span id="cb393-5"><a href="book_04_intermediate_2nd_half.html#cb393-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(year))</span>
<span id="cb393-6"><a href="book_04_intermediate_2nd_half.html#cb393-6"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;年別での従業員数伸び率&quot;</span>)</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="kasika_sanko2" class="section level3" number="5.5.12">
<h3><span class="header-section-number">5.5.12</span> 参考２：データの比較</h3>
<ul>
<li>facetでの比較も便利ですが、少数のグループであればカラーを分けて比較する方法もあります
<ul>
<li>たとえば2013年と2018年のデータだけで比較してみましょう</li>
<li>aes内のfill(あるいはcolor)にグループのカラムを指定します</li>
<li>alphaは色の濃さを指定しています</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="book_04_intermediate_2nd_half.html#cb394-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb394-2"><a href="book_04_intermediate_2nd_half.html#cb394-2"></a><span class="st">  </span><span class="kw">filter</span>(従業員数伸び率 <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>,</span>
<span id="cb394-3"><a href="book_04_intermediate_2nd_half.html#cb394-3"></a>         year <span class="op">==</span><span class="st"> &quot;2013&quot;</span> <span class="op">|</span></span>
<span id="cb394-4"><a href="book_04_intermediate_2nd_half.html#cb394-4"></a><span class="st">         </span>year <span class="op">==</span><span class="st"> &quot;2018&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb394-5"><a href="book_04_intermediate_2nd_half.html#cb394-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> 従業員数伸び率,</span>
<span id="cb394-6"><a href="book_04_intermediate_2nd_half.html#cb394-6"></a>             <span class="dt">fill =</span> year)) <span class="op">+</span></span>
<span id="cb394-7"><a href="book_04_intermediate_2nd_half.html#cb394-7"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.4</span>) <span class="op">+</span></span>
<span id="cb394-8"><a href="book_04_intermediate_2nd_half.html#cb394-8"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;2013年と2018年の従業員数伸び率比較&quot;</span>)</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="kasika_sanko3" class="section level3" number="5.5.13">
<h3><span class="header-section-number">5.5.13</span> 参考３：適切な可視化</h3>
<ul>
<li>データを可視化する方法に答えはありませんが、適切な可視化を模索するのは大切なプロセスです</li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="book_04_intermediate_2nd_half.html#cb395-1"></a>p &lt;-<span class="st"> </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb395-2"><a href="book_04_intermediate_2nd_half.html#cb395-2"></a><span class="st">  </span><span class="kw">filter</span>(従業員数伸び率 <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb395-3"><a href="book_04_intermediate_2nd_half.html#cb395-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, </span>
<span id="cb395-4"><a href="book_04_intermediate_2nd_half.html#cb395-4"></a>             <span class="dt">y =</span> 従業員数伸び率)) <span class="op">+</span></span>
<span id="cb395-5"><a href="book_04_intermediate_2nd_half.html#cb395-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;従業員数伸び率比較&quot;</span>)</span>
<span id="cb395-6"><a href="book_04_intermediate_2nd_half.html#cb395-6"></a>P <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</span>
<span id="cb395-7"><a href="book_04_intermediate_2nd_half.html#cb395-7"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_violin</span>()</span>
<span id="cb395-8"><a href="book_04_intermediate_2nd_half.html#cb395-8"></a>p <span class="op">+</span><span class="st"> </span></span>
<span id="cb395-9"><a href="book_04_intermediate_2nd_half.html#cb395-9"></a><span class="st">  </span><span class="kw">geom_violin</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb395-10"><a href="book_04_intermediate_2nd_half.html#cb395-10"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:42%;">
<p><img src="data_engineering_files/figure-html/unnamed-chunk-107-1.png" width="672" /><img src="data_engineering_files/figure-html/unnamed-chunk-107-2.png" width="672" /><img src="data_engineering_files/figure-html/unnamed-chunk-107-3.png" width="672" /></p>
</div>
</div>
</div>
</div>
<div id="ランキングの作成" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> ランキングの作成</h2>
<ul>
<li>データから知見を得ましょう</li>
</ul>
<div id="rank_result" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> 結果の確認</h3>
<ul>
<li>データを可視化してデータの概要は掴めました</li>
<li>次はデータから有益な情報を得るために、従業員数データであるlong_empからランキングを作成しましょう</li>
<li>ここでは業種別に従業員数伸び率ランキングを作成します</li>
</ul>
<pre><code># A tibble: 1,667 x 4
   企業コード 従業員数伸び率 業種大分類_2018  rank
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;int&gt;
 1 F62151343           4.22  A:農業              1
 2 J30067647           0.598 D:鉱業              1
 3 J34531369           0.41  D:鉱業              2
 4 J34080260           0.269 D:鉱業              3
 5 J34809061           0.189 D:鉱業              4
 6 J34787560          15.9   E:建設業            1
 7 F12124685           8.63  E:建設業            2
 8 J34599205           6.34  E:建設業            3
 9 F82182754           4.49  E:建設業            4
10 J34598664           3.52  E:建設業            5
# ... with 1,657 more rows</code></pre>
</div>
<div id="rank_tejun0" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> 内容と手順</h3>
<ul>
<li>内容
<ul>
<li>従業員数データ(long_sales)を用いて、産業大分類ごとに、2018年の従業員数伸び率が高い順にランキングを付与します</li>
<li>ただし2017年の従業員数が100人以上の企業を対象とし、同着であった場合は順位を飛ばしてください</li>
</ul></li>
<li>手順
<ul>
<li><ol style="list-style-type: decimal">
<li>2017年の従業員数が100人以上の条件でデータを抽出する</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>long_empに業種大分類_2018のデータがないので、data_listのdata_2018から業種大分類_2018を企業コードで紐づける</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>業種でグループ化して2018年従業員数伸び率ランキングを付与する</li>
</ol></li>
</ul></li>
</ul>
<p>実施前に、次頁でランキング関数の説明をします。</p>
</div>
<div id="ランキング関数" class="section level3" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> ランキング関数</h3>
<ul>
<li>はじめにランキングを付与する関数を3つ説明します
<ul>
<li>numカラムの値に対してランキングを作成しています</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:48%;">
<ul>
<li>row_number
<ul>
<li>同着は先に出たほうを優先</li>
</ul></li>
<li>min_rank
<ul>
<li>同着は同じ順位、gapあり</li>
</ul></li>
<li>dense_rank
<ul>
<li>同着は同じ順位、gapなし</li>
</ul></li>
<li>（補足）
<ul>
<li>昇順がデフォルト</li>
<li>降順はdescをかませる</li>
<li>d %&gt;% mutate(rank = min_rank(desc(num)))</li>
</ul></li>
</ul>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:48%;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#kdieqctldt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 22px;
  font-weight: normal;
  font-style: normal;
  background-color: #F4F7E2;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kdieqctldt .gt_heading {
  background-color: #F4F7E2;
  text-align: center;
  border-bottom-color: #F4F7E2;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdieqctldt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #F4F7E2;
  border-bottom-width: 0;
}

#kdieqctldt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #F4F7E2;
  border-top-width: 0;
}

#kdieqctldt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdieqctldt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdieqctldt .gt_col_heading {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 22px;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kdieqctldt .gt_column_spanner_outer {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 22px;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kdieqctldt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kdieqctldt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kdieqctldt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kdieqctldt .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#kdieqctldt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kdieqctldt .gt_from_md > :first-child {
  margin-top: 0;
}

#kdieqctldt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kdieqctldt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kdieqctldt .gt_stub {
  color: #333333;
  background-color: #F4F7E2;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#kdieqctldt .gt_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdieqctldt .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#kdieqctldt .gt_grand_summary_row {
  color: #333333;
  background-color: #F4F7E2;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdieqctldt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kdieqctldt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kdieqctldt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdieqctldt .gt_footnotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdieqctldt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#kdieqctldt .gt_sourcenotes {
  color: #333333;
  background-color: #F4F7E2;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdieqctldt .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#kdieqctldt .gt_left {
  text-align: left;
}

#kdieqctldt .gt_center {
  text-align: center;
}

#kdieqctldt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kdieqctldt .gt_font_normal {
  font-weight: normal;
}

#kdieqctldt .gt_font_bold {
  font-weight: bold;
}

#kdieqctldt .gt_font_italic {
  font-style: italic;
}

#kdieqctldt .gt_super {
  font-size: 65%;
}

#kdieqctldt .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="kdieqctldt" style="overflow-x:auto;overflow-y:auto;width:auto;height:600px;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">num</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">row_number</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">min_rank</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">dense_rank</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_right">100</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">200</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">200</td>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">300</td>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">3</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">400</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">4</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">400</td>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">4</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">400</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">4</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">500</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">5</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
</div>
</div>
<div id="rank_tejun1" class="section level3" number="5.6.4">
<h3><span class="header-section-number">5.6.4</span> 手順１：2017年の従業員数が100人以上</h3>
<ul>
<li>2017年の従業員数が100人以上という条件でfilterをかけると、2018年のデータも消えてしまいます</li>
</ul>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="book_04_intermediate_2nd_half.html#cb397-1"></a>long_emp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb397-2"><a href="book_04_intermediate_2nd_half.html#cb397-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> &quot;2017&quot;</span>, 従業員数 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb397-3"><a href="book_04_intermediate_2nd_half.html#cb397-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(year))</span></code></pre></div>
<pre><code># A tibble: 1,667 x 4
   企業コード year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2017      1401          1.92 
 2 B02117802  2017       233          0.552
 3 B02122250  2017       523          1.76 
 4 B02122602  2017      7564          0.445
 5 B02125529  2017      2274          1.03 
 6 B02128716  2017       261          0.798
 7 B02129789  2017       645          0.591
 8 B02153443  2017      3960          1.10 
 9 B02505784  2017       902          1.81 
10 B02514384  2017       154          0.647
# ... with 1,657 more rows</code></pre>
<hr />
<ul>
<li>先に条件を満たす企業コードを抽出し、その企業コードに対して売上高データをjoinさせる方法で対処します</li>
<li>条件抽出したデータをemp_growth_rank_2018とします</li>
</ul>
<div class="columns">
<div class="column" style="width:55%;">
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="book_04_intermediate_2nd_half.html#cb399-1"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-</span>
<span id="cb399-2"><a href="book_04_intermediate_2nd_half.html#cb399-2"></a><span class="st">  </span>long_emp <span class="op">%&gt;%</span></span>
<span id="cb399-3"><a href="book_04_intermediate_2nd_half.html#cb399-3"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> &quot;2017&quot;</span>, </span>
<span id="cb399-4"><a href="book_04_intermediate_2nd_half.html#cb399-4"></a>         従業員数 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span></span>
<span id="cb399-5"><a href="book_04_intermediate_2nd_half.html#cb399-5"></a><span class="st">  </span><span class="kw">select</span>(企業コード) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb399-6"><a href="book_04_intermediate_2nd_half.html#cb399-6"></a><span class="st">  </span><span class="kw">left_join</span>(long_emp,</span>
<span id="cb399-7"><a href="book_04_intermediate_2nd_half.html#cb399-7"></a>            <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb399-8"><a href="book_04_intermediate_2nd_half.html#cb399-8"></a><span class="st">  </span><span class="co"># 以降は2018年のデータのみでよい</span></span>
<span id="cb399-9"><a href="book_04_intermediate_2nd_half.html#cb399-9"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> &quot;2018&quot;</span>)</span></code></pre></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:41%;">
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="book_04_intermediate_2nd_half.html#cb400-1"></a>emp_growth_rank_<span class="dv">2018</span></span></code></pre></div>
<pre><code># A tibble: 1,667 x 4
   企業コード year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  2018      1096          0.782
 2 B02117802  2018       173          0.742
 3 B02122250  2018       695          1.33 
 4 B02122602  2018     12493          1.65 
 5 B02125529  2018      2472          1.09 
 6 B02128716  2018       376          1.44 
 7 B02129789  2018       986          1.53 
 8 B02153443  2018      5563          1.40 
 9 B02505784  2018       728          0.807
10 B02514384  2018       324          2.10 
# ... with 1,657 more rows</code></pre>
</div>
</div>
</div>
<div id="rank_tejun2" class="section level3" number="5.6.5">
<h3><span class="header-section-number">5.6.5</span> 手順２：業種大分類をjoin</h3>
<ul>
<li>業種大分類はdata_2018とjoinすることで付与します</li>
</ul>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="book_04_intermediate_2nd_half.html#cb402-1"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-<span class="st"> </span>emp_growth_rank_<span class="dv">2018</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb402-2"><a href="book_04_intermediate_2nd_half.html#cb402-2"></a><span class="st">  </span><span class="kw">left_join</span>(data_list<span class="op">$</span>data_<span class="dv">2018</span> <span class="op">%&gt;%</span></span>
<span id="cb402-3"><a href="book_04_intermediate_2nd_half.html#cb402-3"></a><span class="st">              </span><span class="kw">select</span>(<span class="st">&quot;企業コード&quot;</span>, <span class="kw">contains</span>(<span class="st">&quot;業種大分類&quot;</span>)),</span>
<span id="cb402-4"><a href="book_04_intermediate_2nd_half.html#cb402-4"></a>            <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>)</span>
<span id="cb402-5"><a href="book_04_intermediate_2nd_half.html#cb402-5"></a>emp_growth_rank_<span class="dv">2018</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb402-6"><a href="book_04_intermediate_2nd_half.html#cb402-6"></a><span class="st">  </span><span class="kw">relocate</span>(<span class="st">&quot;企業コード&quot;</span>, <span class="kw">contains</span>(<span class="st">&quot;業種大分類&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 1,667 x 5
   企業コード 業種大分類_2018      year  従業員数 従業員数伸び率
   &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;    &lt;dbl&gt;          &lt;dbl&gt;
 1 B02111302  F:製造業             2018      1096          0.782
 2 B02117802  G:卸売・小売業，飲食 2018       173          0.742
 3 B02122250  F:製造業             2018       695          1.33 
 4 B02122602  J:運輸・通信業       2018     12493          1.65 
 5 B02125529  F:製造業             2018      2472          1.09 
 6 B02128716  F:製造業             2018       376          1.44 
 7 B02129789  G:卸売・小売業，飲食 2018       986          1.53 
 8 B02153443  G:卸売・小売業，飲食 2018      5563          1.40 
 9 B02505784  F:製造業             2018       728          0.807
10 B02514384  F:製造業             2018       324          2.10 
# ... with 1,657 more rows</code></pre>
</div>
<div id="rank_tejun3" class="section level3" number="5.6.6">
<h3><span class="header-section-number">5.6.6</span> 手順３：業種別ランキング作成</h3>
<ul>
<li>業種ごとに従業員数伸び率のランキングを付与します</li>
<li>同着後は飛ばす必要がある(gapあり)ランキングなのでminn_rank関数を使用し、descで降順にrankをつけます</li>
<li>業種とrankでソートし、不要なカラムを消去します</li>
</ul>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="book_04_intermediate_2nd_half.html#cb404-1"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-</span>
<span id="cb404-2"><a href="book_04_intermediate_2nd_half.html#cb404-2"></a><span class="st">  </span>emp_growth_rank_<span class="dv">2018</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb404-3"><a href="book_04_intermediate_2nd_half.html#cb404-3"></a><span class="st">  </span><span class="kw">group_by</span>(業種大分類_<span class="dv">2018</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb404-4"><a href="book_04_intermediate_2nd_half.html#cb404-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(従業員数伸び率))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb404-5"><a href="book_04_intermediate_2nd_half.html#cb404-5"></a><span class="st">  </span><span class="kw">arrange</span>(業種大分類_<span class="dv">2018</span>, rank) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb404-6"><a href="book_04_intermediate_2nd_half.html#cb404-6"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>従業員数, <span class="op">-</span>year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb404-7"><a href="book_04_intermediate_2nd_half.html#cb404-7"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
<div id="kekka_ranking" class="section level3" number="5.6.7">
<h3><span class="header-section-number">5.6.7</span> ランキングデータ完成</h3>
<ul>
<li>2017年の従業員数が100人以上の企業で、業種ごとに従業員数伸び率ランキングを作成したデータが完成しました</li>
</ul>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="book_04_intermediate_2nd_half.html#cb405-1"></a>emp_growth_rank_<span class="dv">2018</span></span></code></pre></div>
<pre><code># A tibble: 1,667 x 4
   企業コード 従業員数伸び率 業種大分類_2018  rank
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;int&gt;
 1 F62151343           4.22  A:農業              1
 2 J30067647           0.598 D:鉱業              1
 3 J34531369           0.41  D:鉱業              2
 4 J34080260           0.269 D:鉱業              3
 5 J34809061           0.189 D:鉱業              4
 6 J34787560          15.9   E:建設業            1
 7 F12124685           8.63  E:建設業            2
 8 J34599205           6.34  E:建設業            3
 9 F82182754           4.49  E:建設業            4
10 J34598664           3.52  E:建設業            5
# ... with 1,657 more rows</code></pre>
</div>
<div id="rank_tejun4" class="section level3" number="5.6.8">
<h3><span class="header-section-number">5.6.8</span> ランキング作成まとめ</h3>
<p>手順１から手順３のコードをまとめたものです。</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="book_04_intermediate_2nd_half.html#cb407-1"></a><span class="co"># 2017年の従業員数が100人以上のデータを抽出</span></span>
<span id="cb407-2"><a href="book_04_intermediate_2nd_half.html#cb407-2"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-</span>
<span id="cb407-3"><a href="book_04_intermediate_2nd_half.html#cb407-3"></a><span class="st">  </span>long_emp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> &quot;2017&quot;</span>, 従業員数 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span></span>
<span id="cb407-4"><a href="book_04_intermediate_2nd_half.html#cb407-4"></a><span class="st">  </span><span class="kw">select</span>(企業コード) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-5"><a href="book_04_intermediate_2nd_half.html#cb407-5"></a><span class="st">  </span><span class="kw">left_join</span>(long_emp, <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-6"><a href="book_04_intermediate_2nd_half.html#cb407-6"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> &quot;2018&quot;</span>)</span>
<span id="cb407-7"><a href="book_04_intermediate_2nd_half.html#cb407-7"></a></span>
<span id="cb407-8"><a href="book_04_intermediate_2nd_half.html#cb407-8"></a><span class="co"># 業種大分類を付与</span></span>
<span id="cb407-9"><a href="book_04_intermediate_2nd_half.html#cb407-9"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-<span class="st"> </span></span>
<span id="cb407-10"><a href="book_04_intermediate_2nd_half.html#cb407-10"></a><span class="st">  </span>emp_growth_rank_<span class="dv">2018</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-11"><a href="book_04_intermediate_2nd_half.html#cb407-11"></a><span class="st">  </span><span class="kw">left_join</span>(data_list<span class="op">$</span>data_<span class="dv">2018</span> <span class="op">%&gt;%</span></span>
<span id="cb407-12"><a href="book_04_intermediate_2nd_half.html#cb407-12"></a><span class="st">              </span><span class="kw">select</span>(<span class="st">&quot;企業コード&quot;</span>, <span class="kw">contains</span>(<span class="st">&quot;業種大分類&quot;</span>)),</span>
<span id="cb407-13"><a href="book_04_intermediate_2nd_half.html#cb407-13"></a>            <span class="dt">by =</span> <span class="st">&quot;企業コード&quot;</span>)</span>
<span id="cb407-14"><a href="book_04_intermediate_2nd_half.html#cb407-14"></a></span>
<span id="cb407-15"><a href="book_04_intermediate_2nd_half.html#cb407-15"></a><span class="co"># 業種ごとにランキングを作成してデータを整形</span></span>
<span id="cb407-16"><a href="book_04_intermediate_2nd_half.html#cb407-16"></a>emp_growth_rank_<span class="dv">2018</span> &lt;-</span>
<span id="cb407-17"><a href="book_04_intermediate_2nd_half.html#cb407-17"></a><span class="st">  </span>emp_growth_rank_<span class="dv">2018</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-18"><a href="book_04_intermediate_2nd_half.html#cb407-18"></a><span class="st">  </span><span class="kw">group_by</span>(業種大分類_<span class="dv">2018</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-19"><a href="book_04_intermediate_2nd_half.html#cb407-19"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(従業員数伸び率))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-20"><a href="book_04_intermediate_2nd_half.html#cb407-20"></a><span class="st">  </span><span class="kw">arrange</span>(業種大分類_<span class="dv">2018</span>, rank) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-21"><a href="book_04_intermediate_2nd_half.html#cb407-21"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>従業員数, <span class="op">-</span>year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-22"><a href="book_04_intermediate_2nd_half.html#cb407-22"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
</div>
<div id="おわり-2" class="section level2 unnumbered" number="">
<h2>おわり</h2>
<p>中級編は以上になります。お疲れさまでした。</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="book_03_intermediate_1st_half.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="environment.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
